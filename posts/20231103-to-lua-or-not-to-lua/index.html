<!doctype html><html lang=zh><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>To Lua or Not to Lua</title><link rel=alternate type=application/rss+xml title=RSS href=https://aben20807.github.io/index.xml><link rel=canonical href=https://aben20807.github.io/posts/20231103-to-lua-or-not-to-lua/><link rel="shortcut icon" type=image/png href=https://aben20807.github.io/apple-touch-icon-precomposed.png><meta name=description content="Neovim&rsquo;s shift to Lua—explore settings, plugins, themes, challenges."><meta name=generator content="Hugo 0.113.0"><meta name=og:title content="To Lua or Not to Lua"><meta name=og:type content="article"><meta name=og:image content="https://lh3.googleusercontent.com/d/1nven9GanGzAXxTEgecpCRDf3dLd7OoeB"><meta name=og:description content="Neovim&rsquo;s shift to Lua—explore settings, plugins, themes, challenges."><meta name=og:url content="https://aben20807.github.io/posts/20231103-to-lua-or-not-to-lua/"><meta name=og:site_name content="記錄用"><meta name=keywords content="editor,ide,lua,neovim,plugin,vim,vimscript"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@"><script src=https://cdn.jsdelivr.net/npm/fetch-inject@2.0.4/dist/fetch-inject.umd.min.js integrity="sha256-paKBtnIrL5ClLfBOtgxh1UqYCjL9790IRvDOnBh2LyI=" crossorigin=anonymous></script>
<link rel=stylesheet href=https://aben20807.github.io/css/tachyons.min.css async><link rel=stylesheet href=https://aben20807.github.io/css/story.css?1704445882 async><link rel=stylesheet href=https://aben20807.github.io/css/hugouo.css?1704445882 async><link rel=stylesheet href=https://aben20807.github.io/css/allinone.css?1704445882 async><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.5.0/css/all.css integrity=sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU crossorigin=anonymous async><link href="https://fonts.googleapis.com/css?family=Noto+Sans+TC:400,400i&amp;subset=latin-ext" rel=stylesheet async><script src=https://code.iconify.design/1/1.0.0-rc6/iconify.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.1/lazysizes.min.js></script><noscript><style type=text/css>.lazyload{display:none}</style></noscript><script src=https://cdnjs.cloudflare.com/ajax/libs/quicklink/2.3.0/quicklink.umd.js></script>
<script>window.addEventListener("load",()=>{quicklink.listen()})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-TCW0ZKBVFW"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-TCW0ZKBVFW",{anonymize_ip:!1})}</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8075275543045163" crossorigin=anonymous></script><meta name=referrer content="no-referrer"></head><body class="ma0 bg-main section-posts page-kind-page is-page-true"><header class="cover bg-top" style=background-image:url(https://lh3.googleusercontent.com/d/1nven9GanGzAXxTEgecpCRDf3dLd7OoeB);background-position:50%><div class=bg-black-60><nav class="hide-print sans-serif border-box pa3 ph5-l"><a href=https://aben20807.github.io/ title=Home><img src=https://aben20807.github.io/img/logo.jpg class="w2 h2 br-100" alt=記錄用></a><div class="fr h2 pv2 tr" id=menu-bar><a class="link f5 ml2 dim near-white no-underline-on-hover" href=/categories/>分類</a><div class=subnav><span class="link f5 ml2 dim h-100 near-white no-underline-on-hover">More <i class="fa fa-caret-down"></i></span><div class=subnav-content><a class="link f5 ml2 dim ml2 w-100 dim near-white no-underline-on-hover" href=/tags/>標籤</a>
<a class="link f5 ml2 dim ml2 w-100 dim near-white no-underline-on-hover" href=/series/>系列</a>
<a class="link f5 ml2 dim ml2 w-100 dim near-white no-underline-on-hover" href=/archives/>歸檔</a>
<a class="link f5 ml2 dim ml2 w-100 dim near-white no-underline-on-hover" href=/note/>Note</a>
<a class="link f5 ml2 dim ml2 w-100 dim near-white no-underline-on-hover" href=/anime/>Anime</a>
<a class="link f5 ml2 dim ml2 w-100 dim near-white no-underline-on-hover" href=https://github.com/aben20807/blog-post-issues/issues target=_blank rel="noreferrer noopener">GitHub</a></div></div><a class="link f5 ml2 dim near-white no-underline-on-hover" href=/about>關於</a>
<a class="link f5 ml2 dim near-white fas fa-rss-square no-underline-on-hover" href=https://aben20807.github.io/index.xml title="RSS Feed"></a>
<a class="link f5 ml2 dim near-white fas fa-envelope no-underline-on-hover" href=https://aben20807.github.io/subscription/ role=button title=Subscription></a>
<a class="link f5 ml2 dim near-white fas fa-coffee no-underline-on-hover" href=https://www.buymeacoffee.com/aben20807 target=_blank title="Buy me a coffee"></a>
<a class="link f5 ml2 dim near-white fas fa-search no-underline-on-hover" href=https://aben20807.github.io/search/ role=search title=Search></a><div class="js-toggle-wrapper f5 ml1" title="light-dark theme switch"><div class=js-toggle><div class=js-toggle-track><div class=js-toggle-track-check><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAABlJJREFUWAm1V3tsFEUcntnXvXu0tBWo1ZZHihBjCEWqkHiNaMLDRKOtQSKaiCFKQtS/SbxiFCHGCIkmkBSMwZhQNTFoQZD0DFiwtCDFAkdDqBBBKFj63rvdnfH7zfVo5aFBj0l2Z/dm5vd98/0es8dYjlpr62azufnDQNZcU1PciMfjWvb9rvZSMk4Ayfb36pLH13189GC8LAtIRLLPt+pzwrCuLq4ISEv/gHmitrAwfPbEkXc/ad4dL6iujrvyX0jcitgd/yZlZqftP6995Mr5TVLa22Tn8XVX2g/XLSRjUu7Q79jonS7I7hS7/0oOb5VyqF52n98oj7esXX07EjlxwXWisRmSnm3b29TTM8iYrjmFBWExubxwY/uhNas4r/WySl1fc5cetDMd7ydl+lMJJRw5WC8ud62Xx5rfepzwxgZmbhUYNS5Stvsj4yo2GXJEFBVHWDBkfdbR9HpYBaaUajDnBLKKpl1xRKYcgGtMCqEzTaSnThk/SQT0uJqTqFNBmXMCsZE48DzRZRMBRjv1GHNdk3HBImF9ZUvTyxM40pMKVc4JZBXQOLOFoDeKSxdp6HIQcO4rjYT9fn0pjbz9GLt7BAAODmjSVReXUMFzNW5x5vfxp2mIxZjIuQKJxAmFa+is2DQJJQ0JyBVExNOYcJnPxx/6/utnijmP555ALEagKAGGnGn64QORBjARcIA/yJk7JMJBLRrNtybTvH88KGjCf2jK86bhzmMcwDKFZEQvbIhxFYhChoMWMzU2iWznlIBEVJOsP+1bdX/ALx9l7jApADeDAEcMkE90JnUmmGl4USKQ0xhoW3JB5XY0YrxYWhLwMZZypUyjDGH35AbNwgUGiFBPpuGbHCpAOV1ZGXf2f/taftAv31DyeymN2d1IhAFAwTOmnzF/kKcdh3me7CYCOVNgycju84u8DeVlwfFq9/ZlTfldYrMUjOlrkjkD+rU+WzCROkcEchIDHR011syZW9JHD7y07N6JvhWMpz3pugaTkB6lWFVCKkhck0zzeMp2utq+uHrmfxOgoCO/Z8CXPlEQ1bdH8wgvhSIkEG0ICcQeExIFGdimjvKka7btJFZuaXOammIGKUCFQ53j9EN1dYKWqHf0t2w407W2tgs6h89ZnImjB55flh81tt9XirjjDuSl+oIPRQ0iWPgNZ5GqTqbBe3vSzEl5n5PhWKwocyR2HlqYN61qV18WjYjE8JLARZPQsUSim8foIRYTlGr02Ly7piASFRtKJ4VfieYhxdS2JcDVMN6xVOKZyrCGm8b108lrLRVzvptLH7IoEFLFANes6KnDi+uxfmvFnF17oALq5u1agu3/YfHkcSFzeSggV5eXRfIB7CHNcO5SUI+Ih5Ir7f4MAV9IqdFzdZgNpZw1Gcs1mNvgGbTbqQ9/cz7ZuuhgyYRQ49ljTyWHhr2DwpNHHFf+5gnWZ3Bharo+0TD5dNMw5vv9RlVpSRDHK4TlnoukhtYApuOHejSZQuo5g/A9BysdKRCyLl6062fN37OXMDlvUJtUrtmxo0avrW3wTrYs3jJ9RvRVChrmSmanPMpX2OXMsmDGh6AiEIwBAlvkOqIdBy+8JyAz8pz7QxiDth4KDy5uAlwzrWTnwC8Vc4KVAMZ3YUZ+IqoIjP3h5KFFX1ZMy3uW+7RhEDHgTi0zC9rS7uhPCDiNrGFyqBeERtKN/B0YlyFCkw0NJ5C0Ojv7zvT1a1WV1TuvZDdL4NTgB7CASYpsen6gqvG5jmTf5qHedADgkBl3D0nkSgNhZACDyi0FUKZRr3IdRjgN4WPPoFMIIegIK3mqd38fS80mcJKelM4szNyzZtQbkchGePuBRS8Eg9pHU8ojRQpSqs+ajAIwTjjUMQ/nvTNM0kicwYxZIYMh/891DYi+fvedB+c1xsm4lDU6ya+Axtz+RiAzEVYbajQOpq17F0R9QevNcEhfcU+xvyQQUalGJBSesqOkgPQ4YNyUZL9fSvUPDjoNAwN8/dwFjaczNkc3ptaMud1EIDtGcmXTcefO2cGSvKIFfp/2JIJxlq7xEl3nVPM4fDeIbPkD16/ptNc0bDu7qxbsu0R2JGywWMIjF2ft3tjfloAyQAGXiOn8hrqwbVvMXzaO+QeHXP6nF0wvX74Hf4NGG5GPjSlYoyM3P/0FbCT6zvM/yYoAAAAASUVORK5CYII=" role=presentation style=pointer-events:none width=16 height=16></div><div class=js-toggle-track-x><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAABwNJREFUWAmtV1tsFFUY/s6Z2d22zLYlZakUCRVaQcqlWIiCiS1gTEB9UAO+GR9En3iQGI0xJiSiRB98MjEq8cEQTSBeHhQM0V7whtEGDWC90BYitxahtNtu25058/v/ZzvLbilawJNM5+yZ89+//1LgJhYRNLW1uDfBAvpGiIk2O5auvfFxqIH3ZJ8/u06GN6Z9+wVl5SjcD1IbZa/UPkPyYl2uR4dreoD2bnbYxTlBBRytkHXtAREphP5KuH4lddx9h70yxX05t7yYXwGb6W8nx1jibpl2rFlGBxcG9M18okOrn7Bnk/BAO/4bI0UeEE1zjBp3UmvjOxJXJdaKN/ZiIu4tOZrAb4aTdZAZArKmWeiiJZ6jt5tiagdCS9+6cgO1Ne6Mvhe+ixTIfyDVhipnK9p+P0Edqx9RW/YZtQVGmOLChRxNNlyPsTEgPQKMB3dbEHa0h1awYmQ83enTd2vmUtvKd1Glv2RkzBb+kZGRrKtjzG60Wguhd/lJZBingbcfWWe72vjT75bJDrhYtvA0hrurETDr5HyF2Knb1MM4ab//xIoOqueA0edRnkkinTyJdYvqLFDZO4zUPFCvVoDjJq4T7TE61IWh4x5KqxX5KVKkX8WZ/t2ov2cb3MHt4dhIyOxIJxJOOF6xRx/99BksXLoecWcXytILMNBDqKpnGZWPquYfPxY8iXGR9fK+SgFrgcRPXPjVqhehL+3EmZ5RGJQi1QBU8TPThQnOQzm+5UXGIcetUeEAfP13VwzpI+w1jGJWdSliNfvVhiMPiOsllJag4M/UGHiqM6dlBb2OTLKHHV6KkvogrJ4XhBWniWK/Gp1MQyf93FOeUXKmKk/FzJxbQtKLjFXYT4USupy8fQVir2ynVEBiZMG0qtOHMS/AW4Gwrk7BG3C1F0B5nqNKE0CME4MfVRLPnXkBKe+ipvoFhNQywOhdghvLi0F8ReyVXV4BKTBRbbe5f64zR/DHsdZw1hJfeWlHl/GNRJzDxrd5m192z78TMaVnKELZoINZS4BzQ7vtnZljSnha/pPCbkuxzXcupYwI5tIeCpGc0Yp9tWHZQy/rmYhRfNgg4bHJBYLzGkxsRJF4XKlE2jBOHNSv3kY7Tj6vthzPFl61BrYwqFlmEQhtSVXmLiksxLmtRgYXI1ULU61JJ4eVKmG3/5sCVgpbMT6OMJ2E08/29Xf3w6v4FnHdCjfWgXu/O8Z5mLdCkeRs2khHe1DqOtQwbHWTAnM5S2HNmhALYo5KjkPFrMMKjZl6HxhWIAb0BqE+/73GrBRQUsKYiBu4JX8ycI6wtw+i5ef3NZpsrKVSHYCP37jwGDgeE1SA0S/xtl5SU2fs1ApEp0qTLVRjgyycDSsLHMSwmFltZMStR3uLLg6BdLhDa5dC6ryU2pHBe1BVO9tUcwfitJt2CLJZUHoG6T7Op75u0IyK31TCPcwFqgPk/KCaD3dFOuZBCO7xvCT/j048b3I3c7F2+WuOW7qdgkucFYlcQ4qop3yzTX7WaKfOCccye3Ts1Etq0+a/BHCF1yPgF3tAUkR6OrtGmo6gl94qqcXKh3rDyrOkPa58URoWcov2Mo6M+0QjrqKB+b7++oMa9Sz+ZkM0mie6aAtnGUvhmxaI+TogPOSQedgWioGSHFLn3v4kLh4HRspNmOGv41k+55siLFp2z6xYeJjhljFcbmxJlr4ga06TbevSByz/glQq4BJx46/c+237PbBqEYKxX3HpmKZEnQnr65X20hqJYaNcLoFOLiJk2LuBbyg7Q0OEn+hm0P3honxFD6rdxYorKpeIoi4YSSvyQHQIbM5t4+YNxLj/OxhVOOE4585qGpjnq+wSx6Q9CtNxTjd5klB+g6Mv36r0+b9cZFi44WYkHdG2ZWb3TtOUOXyVAlKlpGvJIAJ3eBMyfYS5C0qRZGtC85j+4sOasDe9xznPYezhhO/2Q6eP2fSOvYHOjtuQ1a9Q1VKynVDaMc8E0tptdxUsTFpFIYjcZKcbnoaQTNdiqCwNlL4G7oziSqGnT1ALf34vhk4R5zU3qYV9ONp9K88RtouShE68JwaU8dFw5W617shWa9ykeaBIn2hcsvPgL00k45QdTCZuSVcTRNs+8fnyLvooQfR5iujAnR9bxfY2xOVOxFS8SK3Le0l48VyYu1M8HRe5JD8wKPTjYnifaK3Wfn/GChYQ8ZAi6WRzWgqLV5YrsVLnZaVSoXU1g9gOIDwFySiGi+Zdrnzr7J3r+SMuszlcQCRn8lNGcTuSy2jOI7o9mxjZo+vR3ej3tN+ifRSOyUTS0+VMOid93cCubeiy/6TImS0QxRSCq2vxKr45zV+FQnjWH6D2xg+E9EatLcLAdHTgtGGD80D6jM0+aOl4wJgO/f96R2aJKCQ3yvgftRhdFMOpd6oAAAAASUVORK5CYII=" role=presentation style=pointer-events:none width=16 height=16></div></div><div class=js-toggle-thumb></div><input class=js-toggle-screenreader-only type=checkbox aria-label="Switch between Dark and Light mode"></div></div><style>.js-toggle-wrapper{display:inline;width:fit-content}.js-toggle{touch-action:pan-x;display:inline-block;position:relative;cursor:pointer;background-color:transparent;border:0;padding:0;-webkit-touch-callout:none;user-select:none;-webkit-tap-highlight-color:transparent;-webkit-tap-highlight-color:transparent}.js-toggle-screenreader-only{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.js-toggle-track{width:2rem;height:.95rem;padding:0;border-radius:1.3rem;background-color:#0f1114;transition:all .2s ease}.js-toggle-track-check{position:absolute;width:.7rem;height:.7rem;left:.2rem;top:0;bottom:0;margin-top:auto;margin-bottom:auto;line-height:0;opacity:0;transition:opacity .25s ease}.js-toggle--checked .js-toggle-track-check{opacity:1;transition:opacity .25s ease}.js-toggle-track-x{position:absolute;width:.7rem;height:.7rem;right:.2rem;top:0;bottom:0;margin-top:auto;margin-bottom:auto;line-height:0;opacity:1;transition:opacity .25s ease}.js-toggle--checked .js-toggle-track-x{opacity:0}.js-toggle-thumb{position:absolute;top:.03rem;left:.03rem;width:.9rem;height:.9rem;border-radius:50%;background-color:#fafafa;box-sizing:border-box;transition:all .5s cubic-bezier(.23,1,.32,1)0ms;transform:translateX(0)}.js-toggle--checked .js-toggle-thumb{transform:translateX(1.05rem);border-color:#19ab27}.js-toggle--focus .js-toggle-thumb{box-shadow:0 0 2px 3px #ffa7c4}.js-toggle:active .js-toggle-thumb{box-shadow:0 0 5px 5px #ffa7c4}</style><script>var body=document.body,switcher=document.getElementsByClassName("js-toggle")[0];switcher.addEventListener("click",function(){this.classList.toggle("js-toggle--checked"),this.classList.add("js-toggle--focus"),this.classList.contains("js-toggle--checked")?(body.classList.add("dark-mode"),localStorage.setItem("darkMode","true")):(body.classList.remove("dark-mode"),setTimeout(function(){localStorage.removeItem("darkMode")},100))}),localStorage.getItem("darkMode")&&(switcher.classList.add("js-toggle--checked"),body.classList.add("dark-mode"))</script></div></nav><div id=hdr class="tc-l pv4-ns pv5-l pv2 ph3 ph4-ns"><h1 class="near-white mt1-ns f2 fw3 pt5 mb0 mt0 lh-title">To Lua or Not to Lua</h1><h2 class="near-white mt3-l mb4-l fw1 f6 f3-l measure-wide-l center lh-copy mt2 mb3">Published
<time datetime=2023-11-07T15:41:48+08:00>Nov 7, 2023</time>
<span class=display-print>by Huang, Po-Hsuan 黃柏瑄</span>
in <a href=https://aben20807.github.io/categories/%E7%B7%A8%E8%BC%AF%E5%99%A8 class="no-underline category title-link near-white dim">編輯器</a>
<span class=display-print>at <a href=https://aben20807.github.io/posts/20231103-to-lua-or-not-to-lua/>https://aben20807.github.io/posts/20231103-to-lua-or-not-to-lua/</a></span></h2><h6 class="near-white fw1 f6 f5-l measure-wide-l center lh-copy"><span title="Word count: 3841 words"><i class="far fa-file-alt"></i></i> 3841 words</span> <span title="Reading time: 18 minutes"><i class="far fa-clock"></i> 18 minutes</span></h6></div></div></header><main role=main><div class="row bg-main"><div id=toc class="column col-2 hide-print"></div><div class="column col-1 printable"><article class="center bg-main br-3 pv1 ph4 lh-copy f5 nested-links" style=max-width:54rem><div class=pb4-ns><div class=row><div class=col-md-8><div class=mb-5><div class="li-x div-x post-meta"><li class=pr-0><a href=https://aben20807.github.io/tags/ style=border:0><i class="fas fa-tags"></i></a></li><span class=tags-sm><li><a href=https://aben20807.github.io/tags/editor role=button class="no-underline no-underline-on-hover">editor</a></li><li><a href=https://aben20807.github.io/tags/ide role=button class="no-underline no-underline-on-hover">ide</a></li><li><a href=https://aben20807.github.io/tags/lua role=button class="no-underline no-underline-on-hover">lua</a></li><li><a href=https://aben20807.github.io/tags/neovim role=button class="no-underline no-underline-on-hover">neovim</a></li><li><a href=https://aben20807.github.io/tags/plugin role=button class="no-underline no-underline-on-hover">plugin</a></li><li><a href=https://aben20807.github.io/tags/vim role=button class="no-underline no-underline-on-hover">vim</a></li><li><a href=https://aben20807.github.io/tags/vimscript role=button class="no-underline no-underline-on-hover">vimscript</a></li></span></div></div></div></div><div class=row><div class=col-md-8></div></div></div><p>Explore the transition to Lua support in Neovim configurations. Follow along as settings are tweaked and personalized, discovering plugin choices, themes, and the challenges faced along the way.</p><p>Disclaimer: I am not proficient in Lua. If there are any mistakes, please inform me.</p><h1 id=prologue class=article-heading>Prologue
<a class="headline-hash smoothScroll hover-show scrollspy" style=font-size:.75em;color:#000;padding-left:.25em href=#prologue><span class=iconify data-icon=octicon-link data-inline=false></span></a></h1><p>I&rsquo;ve been using Vim for many years since my college days, during which time I&rsquo;ve also developed several plugins<sup id=fnref:1 class=footnote-ref-wrapper><a href=#fn:1 class="footnote-ref smoothScroll no-underline-on-hover" role=doc-noteref>1</a></sup> <sup id=fnref:2 class=footnote-ref-wrapper><a href=#fn:2 class="footnote-ref smoothScroll no-underline-on-hover" role=doc-noteref>2</a></sup> for my personal use. Then, driven by curiosity, I switched to using Neovim about two years ago<sup id=fnref:3 class=footnote-ref-wrapper><a href=#fn:3 class="footnote-ref smoothScroll no-underline-on-hover" role=doc-noteref>3</a></sup>. Most of the configurations and plugins were migrated from Vim. Fortunately, the legacy tools are still working.</p><h1 id=lua-for-neovim class=article-heading>Lua for Neovim
<a class="headline-hash smoothScroll hover-show scrollspy" style=font-size:.75em;color:#000;padding-left:.25em href=#lua-for-neovim><span class=iconify data-icon=octicon-link data-inline=false></span></a></h1><p>Let&rsquo;s talk about now. Many new, advanced tools are being made for Neovim. Using Lua is a big change for Neovim, and lots of plugins are being redone in Lua. Some only show how to use Lua. I only knew a bit about Lua—it&rsquo;s a type of code often used for making games, known for being light and easy to manage compared to Vimscript. (I get that spending time learning a language, like Vimscript, just for a text editor might seem a bit silly. But since I don&rsquo;t use Lua every day, it might be the second language I learn just for an editor&mldr;)</p><p>I like using fancy plugins. However, to use those Lua plugins, I have to change the init system. I&rsquo;ve made three or four attempts to convert my legacy settings to the Lua version, but it was quite painful. I believe a breakdown is necessary. I understand the benefit of Lua, especially its module system, which allows easy importing of various modules from files. However, after many years of using Vim, the experience made me gradually attempt to consolidate all settings into one file<sup id=fnref:4 class=footnote-ref-wrapper><a href=#fn:4 class="footnote-ref smoothScroll no-underline-on-hover" role=doc-noteref>4</a></sup>.</p><p>Thus, let&rsquo;s start from scratch.</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ mv ~/.config/nvim ~/.config/nvim_goodbye_vimscript
</span></span></code></pre></div><h1 id=my-environments class=article-heading>My environments
<a class="headline-hash smoothScroll hover-show scrollspy" style=font-size:.75em;color:#000;padding-left:.25em href=#my-environments><span class=iconify data-icon=octicon-link data-inline=false></span></a></h1><ul><li>Ubuntu 20.04</li><li>WSL2 with Ubuntu 20.04</li></ul><h2 id=recommended-font class=article-heading>Recommended font
<a class="headline-hash smoothScroll hover-show scrollspy" style=font-size:.75em;color:#000;padding-left:.25em href=#recommended-font><span class=iconify data-icon=octicon-link data-inline=false></span></a></h2><ul><li><a href=https://github.com/ryanoasis/nerd-fonts title=ryanoasis/nerd-fonts aria-label=ryanoasis/nerd-fonts target=_blank rel="noreferrer noopener"><i class="fas fa-external-link-square-alt"></i> ryanoasis/nerd-fonts</a>; My choice: CascadiaCode.zip<ul><li>Install <strong>Caskaydia Cove Nerd Font Complete Mono</strong> Regular, Italic, Bold</li></ul></li></ul><h2 id=preinstall-packages class=article-heading>Preinstall packages
<a class="headline-hash smoothScroll hover-show scrollspy" style=font-size:.75em;color:#000;padding-left:.25em href=#preinstall-packages><span class=iconify data-icon=octicon-link data-inline=false></span></a></h2><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ sudo apt install lldb <span style=color:#928374;font-style:italic># lldb tool for rustaceanvim</span>
</span></span><span style=display:flex><span>$ curl -L https://deb.nodesource.com/nsolid_setup_deb.sh | sudo bash -s -- <span style=color:#d3869b>20</span> <span style=color:#fe8019>&amp;&amp;</span> sudo apt install -y nodejs <span style=color:#928374;font-style:italic># nodejs for mason-lspconfig.nvim</span>
</span></span><span style=display:flex><span>$ cargo install stylua <span style=color:#928374;font-style:italic># to format lua code</span>
</span></span><span style=display:flex><span>$ cargo install tree-sitter-cli <span style=color:#928374;font-style:italic># for nvim-treesitter/nvim-treesitter</span>
</span></span><span style=display:flex><span>$ cargo install ripgrep <span style=color:#928374;font-style:italic># for telescope &#39;s live_grep</span>
</span></span><span style=display:flex><span>$ rustup component add rust-src rust-analyzer <span style=color:#928374;font-style:italic># for mrcjkb/rustaceanvim</span>
</span></span></code></pre></div><h1 id=install-neovim class=article-heading>Install Neovim
<a class="headline-hash smoothScroll hover-show scrollspy" style=font-size:.75em;color:#000;padding-left:.25em href=#install-neovim><span class=iconify data-icon=octicon-link data-inline=false></span></a></h1><p>I have tried using apt, snap, and binary downloading, all of which have been messy. Recently, I found a tool that seems to be a good choice for installing Neovim, and that tool is <a href=https://github.com/MordechaiHadad/bob title=bob aria-label=bob target=_blank rel="noreferrer noopener"><i class="fas fa-external-link-square-alt"></i> bob</a> (Install Rust environment first). Uninstalling your old Neovim is recommanded before you run following commands.</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ cargo install bob-nvim
</span></span><span style=display:flex><span>$ bob install 0.9.4
</span></span><span style=display:flex><span>$ bob use 0.9.4
</span></span><span style=display:flex><span>$ bob ls
</span></span><span style=display:flex><span>┌───────────┬─────────────┐
</span></span><span style=display:flex><span>│  Version  │  Status     │
</span></span><span style=display:flex><span>├───────────┼─────────────┤
</span></span><span style=display:flex><span>│  v0.9.4   │  Used       │
</span></span><span style=display:flex><span>└───────────┴─────────────┘
</span></span><span style=display:flex><span>$ <span style=color:#fabd2f>echo</span> <span style=color:#b8bb26>&#34;export PATH=\$PATH:\$HOME/.local/share/bob/nvim-bin&#34;</span> &gt;&gt; ~/.bashrc
</span></span></code></pre></div><h2 id=setup-for-virtual-environment class=article-heading>Setup for Virtual Environment
<a class="headline-hash smoothScroll hover-show scrollspy" style=font-size:.75em;color:#000;padding-left:.25em href=#setup-for-virtual-environment><span class=iconify data-icon=octicon-link data-inline=false></span></a></h2><h3 id=install-pyenv-and-target-python-version class=article-heading>Install pyenv and target python version
<a class="headline-hash smoothScroll hover-show scrollspy" style=font-size:.75em;color:#000;padding-left:.25em href=#install-pyenv-and-target-python-version><span class=iconify data-icon=octicon-link data-inline=false></span></a></h3><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ sudo apt install libffi-dev <span style=color:#928374;font-style:italic># for ImportError: No module named &#39;_ctypes&#39;</span>
</span></span><span style=display:flex><span>$ curl -L https://raw.githubusercontent.com/pyenv/pyenv-installer/master/bin/pyenv-installer | bash
</span></span><span style=display:flex><span>$ <span style=color:#fabd2f>echo</span> <span style=color:#b8bb26>&#39;export PATH=&#34;/home/&#39;</span><span style=color:#b8bb26>`</span>whoami<span style=color:#b8bb26>`</span><span style=color:#b8bb26>&#39;/.pyenv/bin:$PATH&#34;&#39;</span> &gt;&gt; ~/.bashrc
</span></span><span style=display:flex><span>$ <span style=color:#fabd2f>echo</span> <span style=color:#b8bb26>&#39;eval &#34;$(pyenv init -)&#34;&#39;</span> &gt;&gt; ~/.bashrc
</span></span><span style=display:flex><span>$ <span style=color:#fabd2f>echo</span> <span style=color:#b8bb26>&#39;eval &#34;$(pyenv virtualenv-init -)&#34;&#39;</span> &gt;&gt; ~/.bashrc
</span></span><span style=display:flex><span>$ <span style=color:#fabd2f>source</span> ~/.bashrc
</span></span><span style=display:flex><span>$ pyenv install --list | grep <span style=color:#b8bb26>&#34; 3\.[8]&#34;</span>
</span></span><span style=display:flex><span>$ pyenv install -v 3.8.10
</span></span></code></pre></div><h3 id=setup-for-neovim class=article-heading>Setup for neovim
<a class="headline-hash smoothScroll hover-show scrollspy" style=font-size:.75em;color:#000;padding-left:.25em href=#setup-for-neovim><span class=iconify data-icon=octicon-link data-inline=false></span></a></h3><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ pyenv virtualenv 3.8.10 neovim3
</span></span><span style=display:flex><span>$ pyenv activate neovim3
</span></span><span style=display:flex><span>$ ~/.pyenv/versions/neovim3/bin/python -m pip install pynvim
</span></span></code></pre></div><h1 id=config-via-lua class=article-heading>Config via Lua
<a class="headline-hash smoothScroll hover-show scrollspy" style=font-size:.75em;color:#000;padding-left:.25em href=#config-via-lua><span class=iconify data-icon=octicon-link data-inline=false></span></a></h1><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ mkdir ~/.config/nvim -p
</span></span><span style=display:flex><span>$ vim ~/.config/nvim/init.lua
</span></span></code></pre></div><p><figure class="gphoto-media center"><div class="img-container center"><noscript><img src=https://lh3.googleusercontent.com/d/12FPRY9OlktOxycZVhnKLSbt4MRpBQ1WM oncontextmenu=return!1 class="center img-zoomable" alt='Hello Lua' data-action=zoom title='Hello Lua'></noscript><img data-src=https://lh3.googleusercontent.com/d/12FPRY9OlktOxycZVhnKLSbt4MRpBQ1WM oncontextmenu=return!1 class="center img-zoomable lazyload" alt='Hello Lua' width data-action=zoom title='Hello Lua'></div><figcaption><center class=caption-text style="margin: 0 .3rem 0;"><p style="margin:.5rem 0 0">Hello Lua</p><font class="douyin hover-show"><a href=https://lh3.googleusercontent.com/d/12FPRY9OlktOxycZVhnKLSbt4MRpBQ1WM target=_blank rel="noreferrer noopener" style=opacity:1;text-decoration:none>OuO</a></font></center></figcaption></figure></p><h2 id=mapping-from-viml-to-lua class=article-heading>Mapping from VimL to Lua
<a class="headline-hash smoothScroll hover-show scrollspy" style=font-size:.75em;color:#000;padding-left:.25em href=#mapping-from-viml-to-lua><span class=iconify data-icon=octicon-link data-inline=false></span></a></h2><h3 id=key-value-assignment class=article-heading>key-value assignment
<a class="headline-hash smoothScroll hover-show scrollspy" style=font-size:.75em;color:#000;padding-left:.25em href=#key-value-assignment><span class=iconify data-icon=octicon-link data-inline=false></span></a></h3><p>The global set is changed to <code>vim.opt</code>.</p><div class=highlight bg=#009330><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=display:flex><span>set tabstop=<span style=color:#d3869b>4</span>
</span></span><span style=display:flex><span>set softtabstop=<span style=color:#d3869b>4</span>
</span></span></code></pre></div><div class=highlight bg=#01007D><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span>vim.opt.tabstop <span style=color:#fe8019>=</span> <span style=color:#d3869b>4</span>
</span></span><span style=display:flex><span>vim.opt.softtabstop <span style=color:#fe8019>=</span> <span style=color:#d3869b>4</span>
</span></span></code></pre></div><h3 id=onoff-setting class=article-heading>on/off setting
<a class="headline-hash smoothScroll hover-show scrollspy" style=font-size:.75em;color:#000;padding-left:.25em href=#onoff-setting><span class=iconify data-icon=octicon-link data-inline=false></span></a></h3><p>Same as key-value set.</p><div class=highlight bg=#009330><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=display:flex><span><span style=color:#928374;font-style:italic>&#34; nobackup + writebackup = backup current file, deleted afterwards (default)</span>
</span></span><span style=display:flex><span>set nobackup
</span></span><span style=display:flex><span>set writebackup
</span></span></code></pre></div><div class=highlight bg=#01007D><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#928374;font-style:italic>-- nobackup + writebackup = backup current file, deleted afterwards (default)</span>
</span></span><span style=display:flex><span>vim.opt.backup <span style=color:#fe8019>=</span> <span style=color:#fe8019>false</span>
</span></span><span style=display:flex><span>vim.opt.writebackup <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>
</span></span></code></pre></div><h3 id=value-append class=article-heading>value append
<a class="headline-hash smoothScroll hover-show scrollspy" style=font-size:.75em;color:#000;padding-left:.25em href=#value-append><span class=iconify data-icon=octicon-link data-inline=false></span></a></h3><div class=highlight bg=#009330><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=display:flex><span><span style=color:#928374;font-style:italic>&#34; let labels not auto indent</span>
</span></span><span style=display:flex><span>set cinoptions+=L0
</span></span></code></pre></div><div class=highlight bg=#01007D><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#928374;font-style:italic>-- let labels not auto indent</span>
</span></span><span style=display:flex><span>vim.opt.cinoptions:append({ <span style=color:#b8bb26>&#34;L0&#34;</span> })
</span></span></code></pre></div><h3 id=global-plugin-functions class=article-heading>global, plugin functions
<a class="headline-hash smoothScroll hover-show scrollspy" style=font-size:.75em;color:#000;padding-left:.25em href=#global-plugin-functions><span class=iconify data-icon=octicon-link data-inline=false></span></a></h3><div class=highlight bg=#009330><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=display:flex><span>line(<span style=color:#b8bb26>&#34;$&#34;</span>)
</span></span><span style=display:flex><span>codeium#Accept()
</span></span></code></pre></div><div class=highlight bg=#01007D><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span>vim.fn.line(<span style=color:#b8bb26>&#34;$&#34;</span>)
</span></span><span style=display:flex><span>vim.fn[<span style=color:#b8bb26>&#34;codeium#Accept&#34;</span>]()
</span></span></code></pre></div><h3 id=exec-normal class=article-heading>exec normal
<a class="headline-hash smoothScroll hover-show scrollspy" style=font-size:.75em;color:#000;padding-left:.25em href=#exec-normal><span class=iconify data-icon=octicon-link data-inline=false></span></a></h3><div class=highlight bg=#009330><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=display:flex><span>:exec <span style=color:#b8bb26>&#34;normal! \zz&#34;</span>
</span></span></code></pre></div><div class=highlight bg=#01007D><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span>vim.cmd.normal(<span style=color:#b8bb26>&#39;</span><span style=color:#b8bb26>\z</span><span style=color:#b8bb26>z&#34;&#39;</span>)
</span></span></code></pre></div><h3 id=autocmd class=article-heading>autocmd
<a class="headline-hash smoothScroll hover-show scrollspy" style=font-size:.75em;color:#000;padding-left:.25em href=#autocmd><span class=iconify data-icon=octicon-link data-inline=false></span></a></h3><div class=highlight bg=#009330><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=display:flex><span><span style=color:#928374;font-style:italic>&#34; let cursor in the middle of screen when entering vim</span>
</span></span><span style=display:flex><span>autocmd VimEnter * :exec <span style=color:#b8bb26>&#34;normal! \zz&#34;</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>&#34; return to last edit position when opening files</span>
</span></span><span style=display:flex><span>autocmd BufReadPost *
</span></span><span style=display:flex><span>            \ <span style=color:#fe8019>if</span> line(<span style=color:#b8bb26>&#34;&#39;\&#34;&#34;</span>) &gt; <span style=color:#d3869b>0</span> &amp;&amp; line(<span style=color:#b8bb26>&#34;&#39;\&#34;&#34;</span>) &lt;= line(<span style=color:#b8bb26>&#39;$&#39;</span>) |
</span></span><span style=display:flex><span>            \   exe <span style=color:#b8bb26>&#34;normal! g`\&#34;&#34;</span> |
</span></span><span style=display:flex><span>            \ <span style=color:#fe8019>endif</span>
</span></span></code></pre></div><div class=highlight bg=#01007D><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#fe8019>local</span> autocmd <span style=color:#fe8019>=</span> vim.api.nvim_create_autocmd <span style=color:#928374;font-style:italic>-- Create autocommand</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>-- let cursor in the middle of screen when entering vim</span>
</span></span><span style=display:flex><span>autocmd(<span style=color:#b8bb26>&#34;VimEnter&#34;</span>, { command <span style=color:#fe8019>=</span> vim.cmd.normal(<span style=color:#b8bb26>&#39;</span><span style=color:#b8bb26>\z</span><span style=color:#b8bb26>z&#34;&#39;</span>) })
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>-- return to last edit position when opening files</span>
</span></span><span style=display:flex><span>autocmd(<span style=color:#b8bb26>&#34;BufReadPost&#34;</span>, {
</span></span><span style=display:flex><span>	callback <span style=color:#fe8019>=</span> <span style=color:#fe8019>function</span>()
</span></span><span style=display:flex><span>		<span style=color:#fe8019>if</span> vim.fn.line(<span style=color:#b8bb26>&#34;&#39;</span><span style=color:#b8bb26>\&#34;</span><span style=color:#b8bb26>&#34;</span>) <span style=color:#fe8019>&gt;</span> <span style=color:#d3869b>0</span> <span style=color:#fe8019>and</span> vim.fn.line(<span style=color:#b8bb26>&#34;&#39;</span><span style=color:#b8bb26>\&#34;</span><span style=color:#b8bb26>&#34;</span>) <span style=color:#fe8019>&lt;=</span> vim.fn.line(<span style=color:#b8bb26>&#34;$&#34;</span>) <span style=color:#fe8019>then</span>
</span></span><span style=display:flex><span>			vim.cmd.normal(<span style=color:#b8bb26>&#39;g`&#34;&#39;</span>)
</span></span><span style=display:flex><span>		<span style=color:#fe8019>end</span>
</span></span><span style=display:flex><span>	<span style=color:#fe8019>end</span>,
</span></span><span style=display:flex><span>})
</span></span></code></pre></div><h3 id=keymap class=article-heading>keymap
<a class="headline-hash smoothScroll hover-show scrollspy" style=font-size:.75em;color:#000;padding-left:.25em href=#keymap><span class=iconify data-icon=octicon-link data-inline=false></span></a></h3><div class=highlight bg=#009330><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=display:flex><span><span style=color:#928374;font-style:italic>&#34; cancel highlight after searching</span>
</span></span><span style=display:flex><span>noremap &lt;M-n&gt; :noh&lt;CR&gt;
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>&#34; background vim</span>
</span></span><span style=display:flex><span>inoremap &lt;C-z&gt; &lt;C-o&gt;&lt;C-z&gt;
</span></span></code></pre></div><div class=highlight bg=#01007D><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#928374;font-style:italic>-- &#34; cancel highlight after searching</span>
</span></span><span style=display:flex><span>vim.keymap.set(<span style=color:#b8bb26>&#34;n&#34;</span>, <span style=color:#b8bb26>&#34;&lt;M-n&gt;&#34;</span>, <span style=color:#b8bb26>&#34;:noh&lt;CR&gt;&#34;</span>,
</span></span><span style=display:flex><span>	{ noremap <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Cancel highlight&#34;</span> })
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>-- background vim in insert mode</span>
</span></span><span style=display:flex><span>vim.keymap.set(<span style=color:#b8bb26>&#34;i&#34;</span>, <span style=color:#b8bb26>&#34;&lt;C-z&gt;&#34;</span>, <span style=color:#b8bb26>&#34;&lt;C-o&gt;&lt;C-z&gt;&#34;</span>,
</span></span><span style=display:flex><span>	{ noremap <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Background vim in insert mode&#34;</span> })
</span></span></code></pre></div><h2 id=plugins class=article-heading>Plugins
<a class="headline-hash smoothScroll hover-show scrollspy" style=font-size:.75em;color:#000;padding-left:.25em href=#plugins><span class=iconify data-icon=octicon-link data-inline=false></span></a></h2><p>The plugin manager comes first. I&rsquo;ve opted for lazy.nvim, which doesn&rsquo;t need an &lsquo;install&rsquo; command. Great choice. For the editor&rsquo;s appearance, I&rsquo;ve been using gruvbox for about a year. It has a nice color setting. My plugins are functioning well, and I might add the comment format for Lua<sup id=fnref:5 class=footnote-ref-wrapper><a href=#fn:5 class="footnote-ref smoothScroll no-underline-on-hover" role=doc-noteref>5</a></sup>. Telescope serves as a powerful search tool with a fuzzy finder, making it a smart replacement for my limited brain power. LSP configuration is quite challenging. I&rsquo;m struggling to find a simple, unified example for setup. I&rsquo;m starting to miss coc.vim&mldr;</p><h3 id=plugin-manager-lazynvim class=article-heading>Plugin Manager: <code>Lazy.nvim</code>
<a class="headline-hash smoothScroll hover-show scrollspy" style=font-size:.75em;color:#000;padding-left:.25em href=#plugin-manager-lazynvim><span class=iconify data-icon=octicon-link data-inline=false></span></a></h3><p>Automatically install all listed plugins. Use <code>:Lazy check</code> to manually verify the updates for the installed plugins.</p><div class=highlight bg=#01007D><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#fe8019>local</span> lazypath <span style=color:#fe8019>=</span> vim.fn.stdpath(<span style=color:#b8bb26>&#34;data&#34;</span>) <span style=color:#fe8019>..</span> <span style=color:#b8bb26>&#34;/lazy/lazy.nvim&#34;</span>
</span></span><span style=display:flex><span><span style=color:#fe8019>if</span> <span style=color:#fe8019>not</span> vim.loop.fs_stat(lazypath) <span style=color:#fe8019>then</span>
</span></span><span style=display:flex><span>	vim.fn.system({
</span></span><span style=display:flex><span>		<span style=color:#b8bb26>&#34;git&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#b8bb26>&#34;clone&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#b8bb26>&#34;--filter=blob:none&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#b8bb26>&#34;https://github.com/folke/lazy.nvim.git&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#b8bb26>&#34;--branch=stable&#34;</span>, <span style=color:#928374;font-style:italic>-- latest stable release</span>
</span></span><span style=display:flex><span>		lazypath,
</span></span><span style=display:flex><span>	})
</span></span><span style=display:flex><span><span style=color:#fe8019>end</span>
</span></span><span style=display:flex><span>vim.opt.rtp:prepend(lazypath)
</span></span></code></pre></div><h3 id=selected-plugins class=article-heading>Selected plugins
<a class="headline-hash smoothScroll hover-show scrollspy" style=font-size:.75em;color:#000;padding-left:.25em href=#selected-plugins><span class=iconify data-icon=octicon-link data-inline=false></span></a></h3><ul><li><code>ellisonleao/gruvbox.nvim</code>: colorscheme</li><li><code>folke/neodev.nvim</code>: neovim</li><li><code>rhysd/committia.vim</code>: git commit message editor</li><li><code>lewis6991/gitsigns.nvim</code>: git inline status</li><li><code>RRethy/vim-illuminate</code>: automatically highlighting other uses of the word un`der the cursor</li><li><code>karb94/neoscroll.nvim</code>: smooth scrolling</li><li><code>alpertuna/vim-header</code>: header of the file</li><li><code>lukas-reineke/indent-blankline.nvim</code>: improved Yggdroot/indentLine</li><li><code>tpope/vim-sleuth</code>: automatically adjusts &lsquo;shiftwidth&rsquo; and &rsquo;expandtab&rsquo;</li><li><code>aben20807/vim-runner</code>: My muscle for runner</li><li><code>aben20807/vim-commenter</code>: My muscle for code comment</li><li><code>nvim-telescope/telescope.nvim</code>: improved junegunn/fzf</li><li><code>justinmk/vim-sneak</code>: the missing motion for Vim</li><li><code>mbbill/undotree</code>: undo history</li><li><code>folke/which-key.nvim</code>: help</li><li><code>nvim-treesitter/nvim-treesitter</code>: syntax</li><li><code>Exafunction/codeium.vim</code>: AI coding</li><li><code>neovim/nvim-lspconfig</code>: LSP</li><li><code>hrsh7th/nvim-cmp</code>: completion</li><li><code>nvim-lualine/lualine.nvim</code>: status line</li></ul><h2 id=one-for-all-initlua class=article-heading>One for All: <code>init.lua</code>
<a class="headline-hash smoothScroll hover-show scrollspy" style=font-size:.75em;color:#000;padding-left:.25em href=#one-for-all-initlua><span class=iconify data-icon=octicon-link data-inline=false></span></a></h2><details><summary><span>Show the full configuration (<code>init.lua</code>)</span></summary><div class=highlight bg=#01007D><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-init.lua data-lang=init.lua><span style=display:flex><span><span style=color:#928374;font-style:italic>--[[--
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>File              : init.lua
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>Author            : Huang, Po-Hsuan &lt;aben20807@gmail.com&gt;
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>Last Modified Date: 2023-11-09 09:58:25
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>--]]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>-- &#34;alpertuna/vim-header&#34; --</span>
</span></span><span style=display:flex><span>vim.g.header_field_author <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Huang, Po-Hsuan&#34;</span>
</span></span><span style=display:flex><span>vim.g.header_field_author_email <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;aben20807@gmail.com&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>vim.g.mapleader <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34; &#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>-- Setup for Virtual Environment</span>
</span></span><span style=display:flex><span>vim.g.python3_host_prog <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;~/.pyenv/versions/neovim3/bin/python&#34;</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>-- &#34;aben20807/vim-commenter&#34; --</span>
</span></span><span style=display:flex><span>vim.g.commenter_use_default_mapping <span style=color:#fe8019>=</span> <span style=color:#fe8019>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>--------------------</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>-- Plugin Manager --</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>--------------------</span>
</span></span><span style=display:flex><span><span style=color:#fe8019>local</span> lazypath <span style=color:#fe8019>=</span> vim.fn.stdpath(<span style=color:#b8bb26>&#34;data&#34;</span>) <span style=color:#fe8019>..</span> <span style=color:#b8bb26>&#34;/lazy/lazy.nvim&#34;</span>
</span></span><span style=display:flex><span><span style=color:#fe8019>if</span> <span style=color:#fe8019>not</span> vim.loop.fs_stat(lazypath) <span style=color:#fe8019>then</span>
</span></span><span style=display:flex><span>	vim.fn.system({
</span></span><span style=display:flex><span>		<span style=color:#b8bb26>&#34;git&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#b8bb26>&#34;clone&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#b8bb26>&#34;--filter=blob:none&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#b8bb26>&#34;https://github.com/folke/lazy.nvim.git&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#b8bb26>&#34;--branch=stable&#34;</span>, <span style=color:#928374;font-style:italic>-- latest stable release</span>
</span></span><span style=display:flex><span>		lazypath,
</span></span><span style=display:flex><span>	})
</span></span><span style=display:flex><span><span style=color:#fe8019>end</span>
</span></span><span style=display:flex><span>vim.opt.rtp:prepend(lazypath)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>--------------------</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>-- Plugins --</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>--------------------</span>
</span></span><span style=display:flex><span>require(<span style=color:#b8bb26>&#34;lazy&#34;</span>).setup({
</span></span><span style=display:flex><span>	{
</span></span><span style=display:flex><span>		<span style=color:#b8bb26>&#34;ellisonleao/gruvbox.nvim&#34;</span>,
</span></span><span style=display:flex><span>		priority <span style=color:#fe8019>=</span> <span style=color:#d3869b>1000</span>,
</span></span><span style=display:flex><span>		config <span style=color:#fe8019>=</span> <span style=color:#fe8019>function</span>()
</span></span><span style=display:flex><span>			vim.o.background <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;dark&#34;</span>
</span></span><span style=display:flex><span>			vim.cmd(<span style=color:#b8bb26>[[colorscheme gruvbox]]</span>)
</span></span><span style=display:flex><span>		<span style=color:#fe8019>end</span>,
</span></span><span style=display:flex><span>		opts <span style=color:#fe8019>=</span> ...,
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	{ <span style=color:#b8bb26>&#34;folke/neodev.nvim&#34;</span>, opts <span style=color:#fe8019>=</span> {} },
</span></span><span style=display:flex><span>	{
</span></span><span style=display:flex><span>		<span style=color:#928374;font-style:italic>-- git commit message editor</span>
</span></span><span style=display:flex><span>		<span style=color:#b8bb26>&#34;rhysd/committia.vim&#34;</span>,
</span></span><span style=display:flex><span>		event <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#39;BufEnter&#39;</span>,
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	{
</span></span><span style=display:flex><span>		<span style=color:#b8bb26>&#34;lewis6991/gitsigns.nvim&#34;</span>,
</span></span><span style=display:flex><span>		event <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#39;BufEnter&#39;</span>,
</span></span><span style=display:flex><span>		config <span style=color:#fe8019>=</span> <span style=color:#fe8019>function</span>()
</span></span><span style=display:flex><span>			require(<span style=color:#b8bb26>&#39;gitsigns&#39;</span>).setup()
</span></span><span style=display:flex><span>		<span style=color:#fe8019>end</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	{
</span></span><span style=display:flex><span>		<span style=color:#928374;font-style:italic>-- automatically highlighting other uses of the word under the cursor</span>
</span></span><span style=display:flex><span>		<span style=color:#b8bb26>&#34;RRethy/vim-illuminate&#34;</span>,
</span></span><span style=display:flex><span>		event <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#39;BufEnter&#39;</span>,
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	{
</span></span><span style=display:flex><span>		<span style=color:#928374;font-style:italic>-- smooth scrolling</span>
</span></span><span style=display:flex><span>		<span style=color:#b8bb26>&#34;karb94/neoscroll.nvim&#34;</span>,
</span></span><span style=display:flex><span>		event <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#39;BufEnter&#39;</span>,
</span></span><span style=display:flex><span>		config <span style=color:#fe8019>=</span> <span style=color:#fe8019>function</span>()
</span></span><span style=display:flex><span>			require(<span style=color:#b8bb26>&#34;neoscroll&#34;</span>).setup()
</span></span><span style=display:flex><span>		<span style=color:#fe8019>end</span>,
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	{
</span></span><span style=display:flex><span>		<span style=color:#b8bb26>&#34;alpertuna/vim-header&#34;</span>,
</span></span><span style=display:flex><span>		event <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#39;BufEnter&#39;</span>,
</span></span><span style=display:flex><span>		config <span style=color:#fe8019>=</span> <span style=color:#fe8019>function</span>()
</span></span><span style=display:flex><span>			vim.g.header_field_timestamp_format <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;%Y-%m-%d %H:%M:%S&#34;</span>
</span></span><span style=display:flex><span>			vim.g.header_field_timestamp <span style=color:#fe8019>=</span> <span style=color:#d3869b>0</span>
</span></span><span style=display:flex><span>			vim.g.header_field_modified_by <span style=color:#fe8019>=</span> <span style=color:#d3869b>0</span>
</span></span><span style=display:flex><span>			vim.keymap.set(<span style=color:#b8bb26>&#34;n&#34;</span>, <span style=color:#b8bb26>&#34;&lt;F4&gt;&#34;</span>, <span style=color:#b8bb26>&#34;:AddHeader&lt;CR&gt;&#34;</span>, { desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Add Header&#34;</span> })
</span></span><span style=display:flex><span>		<span style=color:#fe8019>end</span>,
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	{
</span></span><span style=display:flex><span>		<span style=color:#b8bb26>&#34;lukas-reineke/indent-blankline.nvim&#34;</span>,
</span></span><span style=display:flex><span>		main <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;ibl&#34;</span>,
</span></span><span style=display:flex><span>		opts <span style=color:#fe8019>=</span> {},
</span></span><span style=display:flex><span>		config <span style=color:#fe8019>=</span> <span style=color:#fe8019>function</span>()
</span></span><span style=display:flex><span>			require(<span style=color:#b8bb26>&#34;ibl&#34;</span>).setup()
</span></span><span style=display:flex><span>		<span style=color:#fe8019>end</span>,
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	{
</span></span><span style=display:flex><span>		<span style=color:#928374;font-style:italic>-- automatically adjusts &#39;shiftwidth&#39; and &#39;expandtab&#39;</span>
</span></span><span style=display:flex><span>		<span style=color:#b8bb26>&#34;tpope/vim-sleuth&#34;</span>,
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	{
</span></span><span style=display:flex><span>		<span style=color:#b8bb26>&#34;aben20807/vim-runner&#34;</span>,
</span></span><span style=display:flex><span>		event <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#39;BufEnter&#39;</span>,
</span></span><span style=display:flex><span>		config <span style=color:#fe8019>=</span> <span style=color:#fe8019>function</span>()
</span></span><span style=display:flex><span>			<span style=color:#928374;font-style:italic>-- c</span>
</span></span><span style=display:flex><span>			vim.g.runner_c_executable <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;gcc-8&#34;</span>
</span></span><span style=display:flex><span>			vim.g.runner_c_compile_options <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;-std=gnu99 -Wall -O2&#34;</span>
</span></span><span style=display:flex><span>			<span style=color:#928374;font-style:italic>-- c++</span>
</span></span><span style=display:flex><span>			vim.g.runner_cpp_executable <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;g++-8&#34;</span>
</span></span><span style=display:flex><span>			vim.g.runner_cpp_compile_options <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;-std=c++17 -Wall -lm -O2 -pipe&#34;</span>
</span></span><span style=display:flex><span>		<span style=color:#fe8019>end</span>,
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	{
</span></span><span style=display:flex><span>		<span style=color:#b8bb26>&#34;aben20807/vim-commenter&#34;</span>,
</span></span><span style=display:flex><span>		event <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#39;BufEnter&#39;</span>,
</span></span><span style=display:flex><span>		config <span style=color:#fe8019>=</span> <span style=color:#fe8019>function</span>()
</span></span><span style=display:flex><span>			vim.keymap.set(<span style=color:#b8bb26>&#34;n&#34;</span>, <span style=color:#b8bb26>&#34;&lt;C-j&gt;&#34;</span>, <span style=color:#b8bb26>&#34;:&lt;C-u&gt;call commenter#Comment()&lt;CR&gt;&#34;</span>, { noremap <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Comment&#34;</span> })
</span></span><span style=display:flex><span>			vim.keymap.set(<span style=color:#b8bb26>&#34;i&#34;</span>, <span style=color:#b8bb26>&#34;&lt;C-j&gt;&#34;</span>, <span style=color:#b8bb26>&#34;&lt;ESC&gt;l:&lt;C-u&gt;call commenter#Comment()&lt;CR&gt;i&#34;</span>,
</span></span><span style=display:flex><span>				{ noremap <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Comment&#34;</span> })
</span></span><span style=display:flex><span>			vim.keymap.set(<span style=color:#b8bb26>&#34;v&#34;</span>, <span style=color:#b8bb26>&#34;&lt;C-j&gt;&#34;</span>, <span style=color:#b8bb26>&#34;:&lt;C-u&gt;call commenter#CommentV(visualmode())&lt;CR&gt;&#34;</span>,
</span></span><span style=display:flex><span>				{ noremap <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Comment&#34;</span> })
</span></span><span style=display:flex><span>		<span style=color:#fe8019>end</span>,
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	{
</span></span><span style=display:flex><span>		<span style=color:#b8bb26>&#34;nvim-telescope/telescope.nvim&#34;</span>,
</span></span><span style=display:flex><span>		tag <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;0.1.4&#34;</span>,
</span></span><span style=display:flex><span>		dependencies <span style=color:#fe8019>=</span> { <span style=color:#b8bb26>&#34;nvim-lua/plenary.nvim&#34;</span> },
</span></span><span style=display:flex><span>		config <span style=color:#fe8019>=</span> <span style=color:#fe8019>function</span>()
</span></span><span style=display:flex><span>			<span style=color:#fe8019>local</span> builtin <span style=color:#fe8019>=</span> require(<span style=color:#b8bb26>&#34;telescope.builtin&#34;</span>)
</span></span><span style=display:flex><span>			vim.keymap.set(<span style=color:#b8bb26>&#34;n&#34;</span>, <span style=color:#b8bb26>&#34;&lt;leader&gt;ff&#34;</span>, builtin.find_files, { desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Find files&#34;</span> })
</span></span><span style=display:flex><span>			vim.keymap.set(<span style=color:#b8bb26>&#34;n&#34;</span>, <span style=color:#b8bb26>&#34;&lt;leader&gt;fg&#34;</span>, builtin.live_grep, { desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Live grep&#34;</span> })
</span></span><span style=display:flex><span>			vim.keymap.set(<span style=color:#b8bb26>&#34;n&#34;</span>, <span style=color:#b8bb26>&#34;&lt;leader&gt;fb&#34;</span>, builtin.buffers, { desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Find buffers&#34;</span> })
</span></span><span style=display:flex><span>			vim.keymap.set(<span style=color:#b8bb26>&#34;n&#34;</span>, <span style=color:#b8bb26>&#34;&lt;leader&gt;fh&#34;</span>, builtin.help_tags, { desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Help tags&#34;</span> })
</span></span><span style=display:flex><span>		<span style=color:#fe8019>end</span>,
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	{
</span></span><span style=display:flex><span>		<span style=color:#b8bb26>&#34;justinmk/vim-sneak&#34;</span>,
</span></span><span style=display:flex><span>		event <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#39;BufEnter&#39;</span>,
</span></span><span style=display:flex><span>		config <span style=color:#fe8019>=</span> <span style=color:#fe8019>function</span>()
</span></span><span style=display:flex><span>			vim.cmd(<span style=color:#b8bb26>&#34;let g:sneak#s_next = 1&#34;</span>)
</span></span><span style=display:flex><span>		<span style=color:#fe8019>end</span>,
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	{
</span></span><span style=display:flex><span>		<span style=color:#b8bb26>&#34;mbbill/undotree&#34;</span>,
</span></span><span style=display:flex><span>		config <span style=color:#fe8019>=</span> <span style=color:#fe8019>function</span>()
</span></span><span style=display:flex><span>			vim.keymap.set(<span style=color:#b8bb26>&#34;n&#34;</span>, <span style=color:#b8bb26>&#34;&lt;leader&gt;un&#34;</span>, vim.cmd.UndotreeToggle, { desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Toggle undotree&#34;</span> })
</span></span><span style=display:flex><span>		<span style=color:#fe8019>end</span>,
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	{
</span></span><span style=display:flex><span>		<span style=color:#b8bb26>&#34;folke/which-key.nvim&#34;</span>,
</span></span><span style=display:flex><span>		event <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;VeryLazy&#34;</span>,
</span></span><span style=display:flex><span>		init <span style=color:#fe8019>=</span> <span style=color:#fe8019>function</span>()
</span></span><span style=display:flex><span>			vim.o.timeout <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>
</span></span><span style=display:flex><span>			vim.o.timeoutlen <span style=color:#fe8019>=</span> <span style=color:#d3869b>300</span>
</span></span><span style=display:flex><span>		<span style=color:#fe8019>end</span>,
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	{
</span></span><span style=display:flex><span>		<span style=color:#b8bb26>&#34;nvim-treesitter/nvim-treesitter&#34;</span>,
</span></span><span style=display:flex><span>		build <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;:TSUpdate&#34;</span>,
</span></span><span style=display:flex><span>		config <span style=color:#fe8019>=</span> <span style=color:#fe8019>function</span>()
</span></span><span style=display:flex><span>			<span style=color:#fe8019>local</span> configs <span style=color:#fe8019>=</span> require(<span style=color:#b8bb26>&#34;nvim-treesitter.configs&#34;</span>)
</span></span><span style=display:flex><span>			configs.setup({
</span></span><span style=display:flex><span>				ensure_installed <span style=color:#fe8019>=</span> { <span style=color:#b8bb26>&#34;c&#34;</span>, <span style=color:#b8bb26>&#34;cpp&#34;</span>, <span style=color:#b8bb26>&#34;lua&#34;</span>, <span style=color:#b8bb26>&#34;vim&#34;</span>, <span style=color:#b8bb26>&#34;vimdoc&#34;</span>, <span style=color:#b8bb26>&#34;rust&#34;</span>, <span style=color:#b8bb26>&#34;gitcommit&#34;</span>, <span style=color:#b8bb26>&#34;make&#34;</span>, <span style=color:#b8bb26>&#34;python&#34;</span> },
</span></span><span style=display:flex><span>				sync_install <span style=color:#fe8019>=</span> <span style=color:#fe8019>false</span>,
</span></span><span style=display:flex><span>				highlight <span style=color:#fe8019>=</span> { enable <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span> },
</span></span><span style=display:flex><span>				indent <span style=color:#fe8019>=</span> { enable <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span> },
</span></span><span style=display:flex><span>			})
</span></span><span style=display:flex><span>		<span style=color:#fe8019>end</span>,
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	{
</span></span><span style=display:flex><span>		<span style=color:#b8bb26>&#34;Exafunction/codeium.vim&#34;</span>,
</span></span><span style=display:flex><span>		branch <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;main&#34;</span>,
</span></span><span style=display:flex><span>		event <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#39;BufEnter&#39;</span>,
</span></span><span style=display:flex><span>		config <span style=color:#fe8019>=</span> <span style=color:#fe8019>function</span>()
</span></span><span style=display:flex><span>			vim.g.codeium_no_map_tab <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>
</span></span><span style=display:flex><span>			vim.keymap.set(<span style=color:#b8bb26>&#34;i&#34;</span>, <span style=color:#b8bb26>&#34;&lt;C-g&gt;&#34;</span>, <span style=color:#fe8019>function</span>()
</span></span><span style=display:flex><span>				<span style=color:#fe8019>return</span> vim.fn[<span style=color:#b8bb26>&#34;codeium#Accept&#34;</span>]()
</span></span><span style=display:flex><span>			<span style=color:#fe8019>end</span>, { expr <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Accept [AI]&#34;</span> })
</span></span><span style=display:flex><span>			vim.keymap.set(<span style=color:#b8bb26>&#34;i&#34;</span>, <span style=color:#b8bb26>&#34;&lt;c-t&gt;&#34;</span>, <span style=color:#fe8019>function</span>()
</span></span><span style=display:flex><span>				<span style=color:#fe8019>return</span> vim.fn[<span style=color:#b8bb26>&#34;codeium#CycleCompletions&#34;</span>](<span style=color:#d3869b>1</span>)
</span></span><span style=display:flex><span>			<span style=color:#fe8019>end</span>, { expr <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Next [AI]&#34;</span> })
</span></span><span style=display:flex><span>			vim.keymap.set(<span style=color:#b8bb26>&#34;i&#34;</span>, <span style=color:#b8bb26>&#34;&lt;c-b&gt;&#34;</span>, <span style=color:#fe8019>function</span>()
</span></span><span style=display:flex><span>				<span style=color:#fe8019>return</span> vim.fn[<span style=color:#b8bb26>&#34;codeium#CycleCompletions&#34;</span>](<span style=color:#fe8019>-</span><span style=color:#d3869b>1</span>)
</span></span><span style=display:flex><span>			<span style=color:#fe8019>end</span>, { expr <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Prev [AI]&#34;</span> })
</span></span><span style=display:flex><span>			vim.keymap.set(<span style=color:#b8bb26>&#34;i&#34;</span>, <span style=color:#b8bb26>&#34;&lt;c-x&gt;&#34;</span>, <span style=color:#fe8019>function</span>()
</span></span><span style=display:flex><span>				<span style=color:#fe8019>return</span> vim.fn[<span style=color:#b8bb26>&#34;codeium#Clear&#34;</span>]()
</span></span><span style=display:flex><span>			<span style=color:#fe8019>end</span>, { expr <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Clear [AI]&#34;</span> })
</span></span><span style=display:flex><span>		<span style=color:#fe8019>end</span>,
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	{
</span></span><span style=display:flex><span>		<span style=color:#b8bb26>&#34;neovim/nvim-lspconfig&#34;</span>,
</span></span><span style=display:flex><span>		dependencies <span style=color:#fe8019>=</span> {
</span></span><span style=display:flex><span>			{
</span></span><span style=display:flex><span>				<span style=color:#b8bb26>&#34;williamboman/mason-lspconfig.nvim&#34;</span>,
</span></span><span style=display:flex><span>				dependencies <span style=color:#fe8019>=</span> { <span style=color:#b8bb26>&#34;williamboman/mason.nvim&#34;</span> },
</span></span><span style=display:flex><span>			},
</span></span><span style=display:flex><span>			{
</span></span><span style=display:flex><span>				<span style=color:#b8bb26>&#34;mrcjkb/rustaceanvim&#34;</span>,
</span></span><span style=display:flex><span>				version <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;^3&#34;</span>, <span style=color:#928374;font-style:italic>-- Recommended</span>
</span></span><span style=display:flex><span>				ft <span style=color:#fe8019>=</span> { <span style=color:#b8bb26>&#34;rust&#34;</span> },
</span></span><span style=display:flex><span>				dependencies <span style=color:#fe8019>=</span> { <span style=color:#b8bb26>&#34;mfussenegger/nvim-dap&#34;</span> },
</span></span><span style=display:flex><span>			},
</span></span><span style=display:flex><span>		},
</span></span><span style=display:flex><span>		opts <span style=color:#fe8019>=</span> {
</span></span><span style=display:flex><span>			inlay_hints <span style=color:#fe8019>=</span> { enabled <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span> },
</span></span><span style=display:flex><span>		},
</span></span><span style=display:flex><span>		config <span style=color:#fe8019>=</span> <span style=color:#fe8019>function</span>()
</span></span><span style=display:flex><span>			require(<span style=color:#b8bb26>&#34;mason&#34;</span>).setup({
</span></span><span style=display:flex><span>				PATH <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;prepend&#34;</span>, <span style=color:#928374;font-style:italic>-- &#34;skip&#34; seems to cause the spawning error</span>
</span></span><span style=display:flex><span>			})
</span></span><span style=display:flex><span>			require(<span style=color:#b8bb26>&#34;mason-lspconfig&#34;</span>).setup({
</span></span><span style=display:flex><span>				ensure_installed <span style=color:#fe8019>=</span> {
</span></span><span style=display:flex><span>					<span style=color:#928374;font-style:italic>-- &#34;rust_analyzer&#34;,</span>
</span></span><span style=display:flex><span>					<span style=color:#b8bb26>&#34;pyright&#34;</span>,
</span></span><span style=display:flex><span>					<span style=color:#b8bb26>&#34;marksman&#34;</span>,
</span></span><span style=display:flex><span>					<span style=color:#b8bb26>&#34;bashls&#34;</span>,
</span></span><span style=display:flex><span>					<span style=color:#b8bb26>&#34;clangd&#34;</span>,
</span></span><span style=display:flex><span>					<span style=color:#b8bb26>&#34;lua_ls&#34;</span>,
</span></span><span style=display:flex><span>				},
</span></span><span style=display:flex><span>				<span style=color:#928374;font-style:italic>-- handlers = {</span>
</span></span><span style=display:flex><span>				<span style=color:#928374;font-style:italic>-- 	rust_analyzer = function() end, -- use rustaceanvim</span>
</span></span><span style=display:flex><span>				<span style=color:#928374;font-style:italic>-- },</span>
</span></span><span style=display:flex><span>			})
</span></span><span style=display:flex><span>			<span style=color:#fe8019>local</span> lspconfig <span style=color:#fe8019>=</span> require(<span style=color:#b8bb26>&#34;lspconfig&#34;</span>)
</span></span><span style=display:flex><span>			<span style=color:#928374;font-style:italic>-- lspconfig.rust_analyzer.setup({})</span>
</span></span><span style=display:flex><span>			lspconfig.pyright.setup({})
</span></span><span style=display:flex><span>			lspconfig.marksman.setup({})
</span></span><span style=display:flex><span>			lspconfig.bashls.setup({})
</span></span><span style=display:flex><span>			lspconfig.clangd.setup({})
</span></span><span style=display:flex><span>			lspconfig.lua_ls.setup({
</span></span><span style=display:flex><span>				settings <span style=color:#fe8019>=</span> {
</span></span><span style=display:flex><span>					Lua <span style=color:#fe8019>=</span> {
</span></span><span style=display:flex><span>						runtime <span style=color:#fe8019>=</span> {
</span></span><span style=display:flex><span>							<span style=color:#928374;font-style:italic>-- Tell the language server which version of Lua you&#39;re using</span>
</span></span><span style=display:flex><span>							<span style=color:#928374;font-style:italic>-- (most likely LuaJIT in the case of Neovim)</span>
</span></span><span style=display:flex><span>							version <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;LuaJIT&#34;</span>,
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						diagnostics <span style=color:#fe8019>=</span> {
</span></span><span style=display:flex><span>							<span style=color:#928374;font-style:italic>-- https://github.com/neovim/neovim/issues/21686</span>
</span></span><span style=display:flex><span>							<span style=color:#928374;font-style:italic>-- Get the language server to recognize the `vim` global</span>
</span></span><span style=display:flex><span>							globals <span style=color:#fe8019>=</span> {
</span></span><span style=display:flex><span>								<span style=color:#b8bb26>&#34;vim&#34;</span>,
</span></span><span style=display:flex><span>								<span style=color:#b8bb26>&#34;buffer&#34;</span>,
</span></span><span style=display:flex><span>								<span style=color:#b8bb26>&#34;require&#34;</span>,
</span></span><span style=display:flex><span>							},
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						<span style=color:#928374;font-style:italic>-- Do not send telemetry data containing a randomized but unique identifier</span>
</span></span><span style=display:flex><span>						telemetry <span style=color:#fe8019>=</span> {
</span></span><span style=display:flex><span>							enable <span style=color:#fe8019>=</span> <span style=color:#fe8019>false</span>,
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						hint <span style=color:#fe8019>=</span> { enable <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span> },
</span></span><span style=display:flex><span>					},
</span></span><span style=display:flex><span>				},
</span></span><span style=display:flex><span>			})
</span></span><span style=display:flex><span>		<span style=color:#fe8019>end</span>,
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	{
</span></span><span style=display:flex><span>		<span style=color:#b8bb26>&#34;https://git.sr.ht/~whynothugo/lsp_lines.nvim&#34;</span>,
</span></span><span style=display:flex><span>		config <span style=color:#fe8019>=</span> <span style=color:#fe8019>function</span>()
</span></span><span style=display:flex><span>			require(<span style=color:#b8bb26>&#34;lsp_lines&#34;</span>).setup()
</span></span><span style=display:flex><span>			vim.diagnostic.config({
</span></span><span style=display:flex><span>				virtual_text <span style=color:#fe8019>=</span> <span style=color:#fe8019>false</span>,
</span></span><span style=display:flex><span>			})
</span></span><span style=display:flex><span>			vim.keymap.set(<span style=color:#b8bb26>&#34;n&#34;</span>, <span style=color:#b8bb26>&#34;&lt;Leader&gt;l&#34;</span>, require(<span style=color:#b8bb26>&#34;lsp_lines&#34;</span>).toggle, { desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Toggle lsp_lines&#34;</span> }
</span></span><span style=display:flex><span>			)
</span></span><span style=display:flex><span>		<span style=color:#fe8019>end</span>,
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	{
</span></span><span style=display:flex><span>		<span style=color:#b8bb26>&#34;hrsh7th/nvim-cmp&#34;</span>,
</span></span><span style=display:flex><span>		dependencies <span style=color:#fe8019>=</span> {
</span></span><span style=display:flex><span>			<span style=color:#b8bb26>&#34;hrsh7th/cmp-nvim-lsp&#34;</span>,
</span></span><span style=display:flex><span>			<span style=color:#b8bb26>&#34;hrsh7th/cmp-nvim-lua&#34;</span>,
</span></span><span style=display:flex><span>			<span style=color:#b8bb26>&#34;hrsh7th/cmp-buffer&#34;</span>,
</span></span><span style=display:flex><span>			<span style=color:#b8bb26>&#34;hrsh7th/cmp-path&#34;</span>,
</span></span><span style=display:flex><span>			<span style=color:#b8bb26>&#34;hrsh7th/cmp-cmdline&#34;</span>,
</span></span><span style=display:flex><span>			<span style=color:#928374;font-style:italic>-- luasnip</span>
</span></span><span style=display:flex><span>			<span style=color:#b8bb26>&#34;saadparwaiz1/cmp_luasnip&#34;</span>,
</span></span><span style=display:flex><span>			<span style=color:#b8bb26>&#34;L3MON4D3/LuaSnip&#34;</span>,
</span></span><span style=display:flex><span>			<span style=color:#928374;font-style:italic>-- &#34;simrat39/rust-tools.nvim&#34;,</span>
</span></span><span style=display:flex><span>		},
</span></span><span style=display:flex><span>		config <span style=color:#fe8019>=</span> <span style=color:#fe8019>function</span>()
</span></span><span style=display:flex><span>			<span style=color:#928374;font-style:italic>--Set completeopt to have a better completion experience</span>
</span></span><span style=display:flex><span>			<span style=color:#928374;font-style:italic>-- :help completeopt</span>
</span></span><span style=display:flex><span>			<span style=color:#928374;font-style:italic>-- menuone: popup even when there&#39;s only one match</span>
</span></span><span style=display:flex><span>			<span style=color:#928374;font-style:italic>-- noinsert: Do not insert text until a selection is made</span>
</span></span><span style=display:flex><span>			<span style=color:#928374;font-style:italic>-- noselect: Do not select, force to select one from the menu</span>
</span></span><span style=display:flex><span>			<span style=color:#928374;font-style:italic>-- shortness: avoid showing extra messages when using completion</span>
</span></span><span style=display:flex><span>			<span style=color:#928374;font-style:italic>-- updatetime: set updatetime for CursorHold</span>
</span></span><span style=display:flex><span>			vim.opt.completeopt <span style=color:#fe8019>=</span> { <span style=color:#b8bb26>&#34;menuone&#34;</span>, <span style=color:#b8bb26>&#34;noselect&#34;</span>, <span style=color:#b8bb26>&#34;noinsert&#34;</span> }
</span></span><span style=display:flex><span>			vim.opt.shortmess <span style=color:#fe8019>=</span> vim.opt.shortmess <span style=color:#fe8019>+</span> { c <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span> }
</span></span><span style=display:flex><span>			vim.api.nvim_set_option(<span style=color:#b8bb26>&#34;updatetime&#34;</span>, <span style=color:#d3869b>300</span>)
</span></span><span style=display:flex><span>			vim.diagnostic.config({
</span></span><span style=display:flex><span>				virtual_text <span style=color:#fe8019>=</span> <span style=color:#fe8019>false</span>,
</span></span><span style=display:flex><span>				signs <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>,
</span></span><span style=display:flex><span>				update_in_insert <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>,
</span></span><span style=display:flex><span>				underline <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>,
</span></span><span style=display:flex><span>				severity_sort <span style=color:#fe8019>=</span> <span style=color:#fe8019>false</span>,
</span></span><span style=display:flex><span>				float <span style=color:#fe8019>=</span> {
</span></span><span style=display:flex><span>					border <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;rounded&#34;</span>,
</span></span><span style=display:flex><span>					source <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;always&#34;</span>,
</span></span><span style=display:flex><span>					header <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;&#34;</span>,
</span></span><span style=display:flex><span>					prefix <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;&#34;</span>,
</span></span><span style=display:flex><span>					format <span style=color:#fe8019>=</span> <span style=color:#fe8019>function</span>(diagnostic)
</span></span><span style=display:flex><span>						<span style=color:#fe8019>return</span> string.format(
</span></span><span style=display:flex><span>							<span style=color:#b8bb26>&#34;%s (%s) [%s]&#34;</span>,
</span></span><span style=display:flex><span>							diagnostic.message,
</span></span><span style=display:flex><span>							diagnostic.source,
</span></span><span style=display:flex><span>							diagnostic.code <span style=color:#fe8019>or</span> diagnostic.user_data.lsp.code
</span></span><span style=display:flex><span>						)
</span></span><span style=display:flex><span>					<span style=color:#fe8019>end</span>,
</span></span><span style=display:flex><span>				},
</span></span><span style=display:flex><span>			})
</span></span><span style=display:flex><span>			vim.keymap.set(<span style=color:#b8bb26>&#39;n&#39;</span>, <span style=color:#b8bb26>&#39;&lt;space&gt;e&#39;</span>, vim.diagnostic.open_float, { desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Open diagnostic [CMP]&#34;</span> })
</span></span><span style=display:flex><span>			vim.keymap.set(<span style=color:#b8bb26>&#39;n&#39;</span>, <span style=color:#b8bb26>&#39;[d&#39;</span>, vim.diagnostic.goto_prev, { desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Previous diagnostic [CMP]&#34;</span> })
</span></span><span style=display:flex><span>			vim.keymap.set(<span style=color:#b8bb26>&#39;n&#39;</span>, <span style=color:#b8bb26>&#39;]d&#39;</span>, vim.diagnostic.goto_next, { desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Next diagnostic [CMP]&#34;</span> })
</span></span><span style=display:flex><span>			vim.keymap.set(<span style=color:#b8bb26>&#39;n&#39;</span>, <span style=color:#b8bb26>&#39;&lt;space&gt;q&#39;</span>, vim.diagnostic.setloclist, { desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Open diagnostics list [CMP]&#34;</span> })
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>			<span style=color:#fe8019>local</span> cmp <span style=color:#fe8019>=</span> require(<span style=color:#b8bb26>&#34;cmp&#34;</span>)
</span></span><span style=display:flex><span>			cmp.setup({
</span></span><span style=display:flex><span>				<span style=color:#928374;font-style:italic>-- Enable LSP snippets</span>
</span></span><span style=display:flex><span>				snippet <span style=color:#fe8019>=</span> {
</span></span><span style=display:flex><span>					expand <span style=color:#fe8019>=</span> <span style=color:#fe8019>function</span>(args)
</span></span><span style=display:flex><span>						require(<span style=color:#b8bb26>&#39;luasnip&#39;</span>).lsp_expand(args.body)
</span></span><span style=display:flex><span>					<span style=color:#fe8019>end</span>,
</span></span><span style=display:flex><span>				},
</span></span><span style=display:flex><span>				mapping <span style=color:#fe8019>=</span> {
</span></span><span style=display:flex><span>					[<span style=color:#b8bb26>&#34;&lt;S-Tab&gt;&#34;</span>] <span style=color:#fe8019>=</span> cmp.mapping.select_prev_item(),
</span></span><span style=display:flex><span>					[<span style=color:#b8bb26>&#34;&lt;Tab&gt;&#34;</span>] <span style=color:#fe8019>=</span> cmp.mapping.select_next_item(),
</span></span><span style=display:flex><span>					[<span style=color:#b8bb26>&#34;&lt;C-S-f&gt;&#34;</span>] <span style=color:#fe8019>=</span> cmp.mapping.scroll_docs(<span style=color:#fe8019>-</span><span style=color:#d3869b>4</span>),
</span></span><span style=display:flex><span>					[<span style=color:#b8bb26>&#34;&lt;C-f&gt;&#34;</span>] <span style=color:#fe8019>=</span> cmp.mapping.scroll_docs(<span style=color:#d3869b>4</span>),
</span></span><span style=display:flex><span>					[<span style=color:#b8bb26>&#34;&lt;C-Space&gt;&#34;</span>] <span style=color:#fe8019>=</span> cmp.mapping.complete(),
</span></span><span style=display:flex><span>					[<span style=color:#b8bb26>&#34;&lt;C-e&gt;&#34;</span>] <span style=color:#fe8019>=</span> cmp.mapping.close(),
</span></span><span style=display:flex><span>					[<span style=color:#b8bb26>&#34;&lt;CR&gt;&#34;</span>] <span style=color:#fe8019>=</span> cmp.mapping.confirm({
</span></span><span style=display:flex><span>						behavior <span style=color:#fe8019>=</span> cmp.ConfirmBehavior.Insert,
</span></span><span style=display:flex><span>						select <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>,
</span></span><span style=display:flex><span>					}),
</span></span><span style=display:flex><span>				},
</span></span><span style=display:flex><span>				<span style=color:#928374;font-style:italic>-- Installed sources:</span>
</span></span><span style=display:flex><span>				sources <span style=color:#fe8019>=</span> {
</span></span><span style=display:flex><span>					{ name <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;path&#34;</span> },                        <span style=color:#928374;font-style:italic>-- file paths</span>
</span></span><span style=display:flex><span>					{ name <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;nvim_lsp&#34;</span>,               keyword_length <span style=color:#fe8019>=</span> <span style=color:#d3869b>3</span> }, <span style=color:#928374;font-style:italic>-- from language server</span>
</span></span><span style=display:flex><span>					{ name <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;nvim_lsp_signature_help&#34;</span> },     <span style=color:#928374;font-style:italic>-- display function signatures with current parameter emphasized</span>
</span></span><span style=display:flex><span>					{ name <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;nvim_lua&#34;</span>,               keyword_length <span style=color:#fe8019>=</span> <span style=color:#d3869b>2</span> }, <span style=color:#928374;font-style:italic>-- complete neovim&#39;s Lua runtime API such vim.lsp.*</span>
</span></span><span style=display:flex><span>					{ name <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;buffer&#34;</span>,                 keyword_length <span style=color:#fe8019>=</span> <span style=color:#d3869b>2</span> }, <span style=color:#928374;font-style:italic>-- source current buffer</span>
</span></span><span style=display:flex><span>					{ name <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;vsnip&#34;</span>,                  keyword_length <span style=color:#fe8019>=</span> <span style=color:#d3869b>2</span> }, <span style=color:#928374;font-style:italic>-- nvim-cmp source for vim-vsnip</span>
</span></span><span style=display:flex><span>					{ name <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;calc&#34;</span> },                        <span style=color:#928374;font-style:italic>-- source for math calculation</span>
</span></span><span style=display:flex><span>				},
</span></span><span style=display:flex><span>				window <span style=color:#fe8019>=</span> {
</span></span><span style=display:flex><span>					completion <span style=color:#fe8019>=</span> cmp.config.window.bordered(),
</span></span><span style=display:flex><span>					documentation <span style=color:#fe8019>=</span> cmp.config.window.bordered(),
</span></span><span style=display:flex><span>				},
</span></span><span style=display:flex><span>				formatting <span style=color:#fe8019>=</span> {
</span></span><span style=display:flex><span>					fields <span style=color:#fe8019>=</span> { <span style=color:#b8bb26>&#34;menu&#34;</span>, <span style=color:#b8bb26>&#34;abbr&#34;</span>, <span style=color:#b8bb26>&#34;kind&#34;</span> },
</span></span><span style=display:flex><span>					format <span style=color:#fe8019>=</span> <span style=color:#fe8019>function</span>(entry, item)
</span></span><span style=display:flex><span>						<span style=color:#fe8019>local</span> menu_icon <span style=color:#fe8019>=</span> {
</span></span><span style=display:flex><span>							nvim_lsp <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;L&#34;</span>,
</span></span><span style=display:flex><span>							vsnip <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;S&#34;</span>,
</span></span><span style=display:flex><span>							buffer <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;B&#34;</span>,
</span></span><span style=display:flex><span>							path <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;P&#34;</span>,
</span></span><span style=display:flex><span>						}
</span></span><span style=display:flex><span>						item.menu <span style=color:#fe8019>=</span> menu_icon[entry.source.name]
</span></span><span style=display:flex><span>						<span style=color:#fe8019>return</span> item
</span></span><span style=display:flex><span>					<span style=color:#fe8019>end</span>,
</span></span><span style=display:flex><span>				},
</span></span><span style=display:flex><span>			})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>			<span style=color:#928374;font-style:italic>-- local rt = require(&#34;rust-tools&#34;)</span>
</span></span><span style=display:flex><span>			<span style=color:#928374;font-style:italic>-- rt.setup({</span>
</span></span><span style=display:flex><span>			<span style=color:#928374;font-style:italic>-- 	server = {</span>
</span></span><span style=display:flex><span>			<span style=color:#928374;font-style:italic>-- 		on_attach = function(_, bufnr)</span>
</span></span><span style=display:flex><span>			<span style=color:#928374;font-style:italic>-- 			-- Hover actions</span>
</span></span><span style=display:flex><span>			<span style=color:#928374;font-style:italic>-- 			vim.keymap.set(&#34;n&#34;, &#34;&lt;C-space&gt;&#34;, rt.hover_actions.hover_actions,</span>
</span></span><span style=display:flex><span>			<span style=color:#928374;font-style:italic>-- 				{ buffer = bufnr, desc = &#34;Hover actions [RUST]&#34; })</span>
</span></span><span style=display:flex><span>			<span style=color:#928374;font-style:italic>-- 			-- Code action groups</span>
</span></span><span style=display:flex><span>			<span style=color:#928374;font-style:italic>-- 			vim.keymap.set(&#34;n&#34;, &#34;&lt;Leader&gt;aa&#34;, rt.code_action_group.code_action_group,</span>
</span></span><span style=display:flex><span>			<span style=color:#928374;font-style:italic>-- 				{ buffer = bufnr, desc = &#34;Code action groups [RUST]&#34; })</span>
</span></span><span style=display:flex><span>			<span style=color:#928374;font-style:italic>-- 		end,</span>
</span></span><span style=display:flex><span>			<span style=color:#928374;font-style:italic>-- 	},</span>
</span></span><span style=display:flex><span>			<span style=color:#928374;font-style:italic>-- })</span>
</span></span><span style=display:flex><span>		<span style=color:#fe8019>end</span>,
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	{
</span></span><span style=display:flex><span>		<span style=color:#b8bb26>&#39;nvim-lualine/lualine.nvim&#39;</span>,
</span></span><span style=display:flex><span>		requires <span style=color:#fe8019>=</span> { <span style=color:#b8bb26>&#39;nvim-tree/nvim-web-devicons&#39;</span>, opt <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span> },
</span></span><span style=display:flex><span>		config <span style=color:#fe8019>=</span> <span style=color:#fe8019>function</span>()
</span></span><span style=display:flex><span>			require(<span style=color:#b8bb26>&#39;lualine&#39;</span>).setup {
</span></span><span style=display:flex><span>				options <span style=color:#fe8019>=</span> {
</span></span><span style=display:flex><span>					icons_enabled <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>,
</span></span><span style=display:flex><span>					theme <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#39;gruvbox&#39;</span>,
</span></span><span style=display:flex><span>					component_separators <span style=color:#fe8019>=</span> { left <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#39;&#39;</span>, right <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#39;&#39;</span> },
</span></span><span style=display:flex><span>					section_separators <span style=color:#fe8019>=</span> { left <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#39;&#39;</span>, right <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#39;&#39;</span> },
</span></span><span style=display:flex><span>					disabled_filetypes <span style=color:#fe8019>=</span> {
</span></span><span style=display:flex><span>						statusline <span style=color:#fe8019>=</span> {},
</span></span><span style=display:flex><span>						winbar <span style=color:#fe8019>=</span> {},
</span></span><span style=display:flex><span>					},
</span></span><span style=display:flex><span>					ignore_focus <span style=color:#fe8019>=</span> {},
</span></span><span style=display:flex><span>					always_divide_middle <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>,
</span></span><span style=display:flex><span>					globalstatus <span style=color:#fe8019>=</span> <span style=color:#fe8019>false</span>,
</span></span><span style=display:flex><span>					refresh <span style=color:#fe8019>=</span> {
</span></span><span style=display:flex><span>						statusline <span style=color:#fe8019>=</span> <span style=color:#d3869b>1000</span>,
</span></span><span style=display:flex><span>						tabline <span style=color:#fe8019>=</span> <span style=color:#d3869b>1000</span>,
</span></span><span style=display:flex><span>						winbar <span style=color:#fe8019>=</span> <span style=color:#d3869b>1000</span>,
</span></span><span style=display:flex><span>					}
</span></span><span style=display:flex><span>				},
</span></span><span style=display:flex><span>				sections <span style=color:#fe8019>=</span> {
</span></span><span style=display:flex><span>					lualine_a <span style=color:#fe8019>=</span> { { <span style=color:#b8bb26>&#39;mode&#39;</span>, fmt <span style=color:#fe8019>=</span> <span style=color:#fe8019>function</span>(str) <span style=color:#fe8019>return</span> str:sub(<span style=color:#d3869b>1</span>, <span style=color:#d3869b>1</span>) <span style=color:#fe8019>end</span> } },
</span></span><span style=display:flex><span>					lualine_b <span style=color:#fe8019>=</span> { <span style=color:#b8bb26>&#39;branch&#39;</span>, {
</span></span><span style=display:flex><span>						<span style=color:#b8bb26>&#39;diff&#39;</span>,
</span></span><span style=display:flex><span>						symbols <span style=color:#fe8019>=</span> { added <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#39;+&#39;</span>, modified <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#39;~&#39;</span>, removed <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#39;-&#39;</span> },
</span></span><span style=display:flex><span>					}, {
</span></span><span style=display:flex><span>						<span style=color:#b8bb26>&#39;diagnostics&#39;</span>,
</span></span><span style=display:flex><span>						symbols <span style=color:#fe8019>=</span> { error <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#39;E&#39;</span>, warn <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#39;W&#39;</span>, info <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#39;I&#39;</span>, hint <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#39;H&#39;</span> },
</span></span><span style=display:flex><span>					} },
</span></span><span style=display:flex><span>					lualine_c <span style=color:#fe8019>=</span> { <span style=color:#b8bb26>&#39;filename&#39;</span> },
</span></span><span style=display:flex><span>					lualine_x <span style=color:#fe8019>=</span> { <span style=color:#b8bb26>&#39;encoding&#39;</span>, <span style=color:#b8bb26>&#39;fileformat&#39;</span>, <span style=color:#b8bb26>&#39;filetype&#39;</span> },
</span></span><span style=display:flex><span>					lualine_y <span style=color:#fe8019>=</span> { <span style=color:#b8bb26>&#39;progress&#39;</span> },
</span></span><span style=display:flex><span>					lualine_z <span style=color:#fe8019>=</span> { <span style=color:#b8bb26>&#39;location&#39;</span> }
</span></span><span style=display:flex><span>				},
</span></span><span style=display:flex><span>				inactive_sections <span style=color:#fe8019>=</span> {
</span></span><span style=display:flex><span>					lualine_a <span style=color:#fe8019>=</span> {},
</span></span><span style=display:flex><span>					lualine_b <span style=color:#fe8019>=</span> {},
</span></span><span style=display:flex><span>					lualine_c <span style=color:#fe8019>=</span> { <span style=color:#b8bb26>&#39;filename&#39;</span> },
</span></span><span style=display:flex><span>					lualine_x <span style=color:#fe8019>=</span> { <span style=color:#b8bb26>&#39;location&#39;</span> },
</span></span><span style=display:flex><span>					lualine_y <span style=color:#fe8019>=</span> {},
</span></span><span style=display:flex><span>					lualine_z <span style=color:#fe8019>=</span> {}
</span></span><span style=display:flex><span>				},
</span></span><span style=display:flex><span>				tabline <span style=color:#fe8019>=</span> {},
</span></span><span style=display:flex><span>				winbar <span style=color:#fe8019>=</span> {},
</span></span><span style=display:flex><span>				inactive_winbar <span style=color:#fe8019>=</span> {},
</span></span><span style=display:flex><span>				extensions <span style=color:#fe8019>=</span> {}
</span></span><span style=display:flex><span>			}
</span></span><span style=display:flex><span>		<span style=color:#fe8019>end</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>------------</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>-- Keymap --</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>------------</span>
</span></span><span style=display:flex><span>vim.keymap.set(<span style=color:#b8bb26>&#34;n&#34;</span>, <span style=color:#b8bb26>&#34;&lt;leader&gt;pv&#34;</span>, vim.cmd.Ex, { desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Open file explorer&#34;</span> })
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>-- background vim in insert mode</span>
</span></span><span style=display:flex><span>vim.keymap.set(<span style=color:#b8bb26>&#34;i&#34;</span>, <span style=color:#b8bb26>&#34;&lt;C-z&gt;&#34;</span>, <span style=color:#b8bb26>&#34;&lt;C-o&gt;&lt;C-z&gt;&#34;</span>, { noremap <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Background vim in insert mode&#34;</span> })
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>-- indent</span>
</span></span><span style=display:flex><span>vim.keymap.set(<span style=color:#b8bb26>&#34;n&#34;</span>, <span style=color:#b8bb26>&#34;&lt;&#34;</span>, <span style=color:#b8bb26>&#34;&lt;&lt;&#34;</span>, { desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Indent left&#34;</span> })
</span></span><span style=display:flex><span>vim.keymap.set(<span style=color:#b8bb26>&#34;n&#34;</span>, <span style=color:#b8bb26>&#34;&gt;&#34;</span>, <span style=color:#b8bb26>&#34;&gt;&gt;&#34;</span>, { desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Indent right&#34;</span> })
</span></span><span style=display:flex><span>vim.keymap.set(<span style=color:#b8bb26>&#34;v&#34;</span>, <span style=color:#b8bb26>&#34;&lt;&#34;</span>, <span style=color:#b8bb26>&#34;&lt;gv&#34;</span>, { desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Indent left&#34;</span> })
</span></span><span style=display:flex><span>vim.keymap.set(<span style=color:#b8bb26>&#34;v&#34;</span>, <span style=color:#b8bb26>&#34;&gt;&#34;</span>, <span style=color:#b8bb26>&#34;&gt;gv&#34;</span>, { desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Indent right&#34;</span> })
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>-- move screen smoothly</span>
</span></span><span style=display:flex><span>vim.keymap.set(<span style=color:#b8bb26>&#34;n&#34;</span>, <span style=color:#b8bb26>&#34;&lt;up&gt;&#34;</span>, <span style=color:#b8bb26>&#34;:lua require(&#39;neoscroll&#39;).scroll(-0.10, false, 100)&lt;CR&gt;&#34;</span>,
</span></span><span style=display:flex><span>	{ noremap <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Scroll up&#34;</span> })
</span></span><span style=display:flex><span>vim.keymap.set(<span style=color:#b8bb26>&#34;n&#34;</span>, <span style=color:#b8bb26>&#34;&lt;down&gt;&#34;</span>, <span style=color:#b8bb26>&#34;:lua require(&#39;neoscroll&#39;).scroll(0.10, false, 100)&lt;CR&gt;&#34;</span>,
</span></span><span style=display:flex><span>	{ noremap <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Scroll down&#34;</span> })
</span></span><span style=display:flex><span>vim.keymap.set(<span style=color:#b8bb26>&#34;n&#34;</span>, <span style=color:#b8bb26>&#34;&lt;C-up&gt;&#34;</span>, <span style=color:#b8bb26>&#34;:lua require(&#39;neoscroll&#39;).scroll(-vim.wo.scroll, true, 200)&lt;CR&gt;&#34;</span>,
</span></span><span style=display:flex><span>	{ noremap <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Scroll up multiline&#34;</span> })
</span></span><span style=display:flex><span>vim.keymap.set(<span style=color:#b8bb26>&#34;n&#34;</span>, <span style=color:#b8bb26>&#34;&lt;C-down&gt;&#34;</span>, <span style=color:#b8bb26>&#34;:lua require(&#39;neoscroll&#39;).scroll(vim.wo.scroll, true, 200)&lt;CR&gt;&#34;</span>,
</span></span><span style=display:flex><span>	{ noremap <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Scroll down multiline&#34;</span> })
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>-- left and right can switch buffers</span>
</span></span><span style=display:flex><span>vim.keymap.set(<span style=color:#b8bb26>&#34;n&#34;</span>, <span style=color:#b8bb26>&#34;&lt;left&gt;&#34;</span>, <span style=color:#b8bb26>&#34;:bp&lt;CR&gt;&#34;</span>, { noremap <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Previous buffer&#34;</span> })
</span></span><span style=display:flex><span>vim.keymap.set(<span style=color:#b8bb26>&#34;n&#34;</span>, <span style=color:#b8bb26>&#34;&lt;right&gt;&#34;</span>, <span style=color:#b8bb26>&#34;:bn&lt;CR&gt;&#34;</span>, { noremap <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Next buffer&#34;</span> })
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>-- Move by line</span>
</span></span><span style=display:flex><span>vim.keymap.set(<span style=color:#b8bb26>&#34;n&#34;</span>, <span style=color:#b8bb26>&#34;j&#34;</span>, <span style=color:#b8bb26>&#34;(v:count == 0 ? &#39;gj&#39; : &#39;j&#39;)&#34;</span>, { silent <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, expr <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, remap <span style=color:#fe8019>=</span> <span style=color:#fe8019>false</span> })
</span></span><span style=display:flex><span>vim.keymap.set(<span style=color:#b8bb26>&#34;n&#34;</span>, <span style=color:#b8bb26>&#34;k&#34;</span>, <span style=color:#b8bb26>&#34;(v:count == 0 ? &#39;gk&#39; : &#39;k&#39;)&#34;</span>, { silent <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, expr <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, remap <span style=color:#fe8019>=</span> <span style=color:#fe8019>false</span> })
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>-- Search results centered please</span>
</span></span><span style=display:flex><span>vim.keymap.set(<span style=color:#b8bb26>&#34;n&#34;</span>, <span style=color:#b8bb26>&#34;n&#34;</span>, <span style=color:#b8bb26>&#34;nzz&#34;</span>, { noremap <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, silent <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span> })
</span></span><span style=display:flex><span>vim.keymap.set(<span style=color:#b8bb26>&#34;n&#34;</span>, <span style=color:#b8bb26>&#34;N&#34;</span>, <span style=color:#b8bb26>&#34;Nzz&#34;</span>, { noremap <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, silent <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span> })
</span></span><span style=display:flex><span>vim.keymap.set(<span style=color:#b8bb26>&#34;n&#34;</span>, <span style=color:#b8bb26>&#34;*&#34;</span>, <span style=color:#b8bb26>&#34;*zz&#34;</span>, { noremap <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, silent <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span> })
</span></span><span style=display:flex><span>vim.keymap.set(<span style=color:#b8bb26>&#34;n&#34;</span>, <span style=color:#b8bb26>&#34;#&#34;</span>, <span style=color:#b8bb26>&#34;#zz&#34;</span>, { noremap <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, silent <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span> })
</span></span><span style=display:flex><span>vim.keymap.set(<span style=color:#b8bb26>&#34;n&#34;</span>, <span style=color:#b8bb26>&#34;g*&#34;</span>, <span style=color:#b8bb26>&#34;g*zz&#34;</span>, { noremap <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, silent <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span> })
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>-- &#34; cancel highlight after searching</span>
</span></span><span style=display:flex><span>vim.keymap.set(<span style=color:#b8bb26>&#34;n&#34;</span>, <span style=color:#b8bb26>&#34;&lt;M-n&gt;&#34;</span>, <span style=color:#b8bb26>&#34;:noh&lt;CR&gt;&#34;</span>, { noremap <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Cancel highlight&#34;</span> })
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>-- &#34; search select text by pressing // in visual mode</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>-- &#34; Ref: http://vim.wikia.com/wiki/Search_for_visually_selected_text</span>
</span></span><span style=display:flex><span>vim.keymap.set(<span style=color:#b8bb26>&#34;v&#34;</span>, <span style=color:#b8bb26>&#34;//&#34;</span>, <span style=color:#b8bb26>&#34;y/&lt;C-r&gt;=escape(@</span><span style=color:#b8bb26>\&#34;</span><span style=color:#b8bb26>,&#39;/&#39;)&lt;CR&gt;&lt;CR&gt;&#34;</span>, { noremap <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Search select text&#34;</span> })
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>-- &#34; map ctrl-a to select whole text</span>
</span></span><span style=display:flex><span>vim.keymap.set(<span style=color:#b8bb26>&#34;n&#34;</span>, <span style=color:#b8bb26>&#34;&lt;C-a&gt;&#34;</span>, <span style=color:#b8bb26>&#34;ggVG&#34;</span>, { noremap <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Select whole text&#34;</span> })
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>-- Not overwrite paste buffer after pasting</span>
</span></span><span style=display:flex><span>vim.keymap.set(<span style=color:#b8bb26>&#34;x&#34;</span>, <span style=color:#b8bb26>&#34;p&#34;</span>, <span style=color:#b8bb26>&#34;P&#34;</span>, { noremap <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Paste without overwriting buffer&#34;</span> })
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#fe8019>if</span> vim.lsp.inlay_hint <span style=color:#fe8019>then</span>
</span></span><span style=display:flex><span>	vim.keymap.set(<span style=color:#b8bb26>&#34;n&#34;</span>, <span style=color:#b8bb26>&#34;&lt;leader&gt;in&#34;</span>, <span style=color:#fe8019>function</span>()
</span></span><span style=display:flex><span>		vim.lsp.inlay_hint(<span style=color:#d3869b>0</span>, <span style=color:#fe8019>nil</span>)
</span></span><span style=display:flex><span>	<span style=color:#fe8019>end</span>, { desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Toggle Inlay Hints&#34;</span> })
</span></span><span style=display:flex><span><span style=color:#fe8019>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>vim.keymap.set(<span style=color:#b8bb26>&#34;n&#34;</span>, <span style=color:#b8bb26>&#34;&lt;leader&gt;gD&#34;</span>, vim.lsp.buf.declaration,
</span></span><span style=display:flex><span>	{ noremap <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, silent <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Go to declaration [LSP]&#34;</span> })
</span></span><span style=display:flex><span>vim.keymap.set(<span style=color:#b8bb26>&#34;n&#34;</span>, <span style=color:#b8bb26>&#34;&lt;leader&gt;gd&#34;</span>, vim.lsp.buf.definition,
</span></span><span style=display:flex><span>	{ noremap <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, silent <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Go to definition [LSP]&#34;</span> })
</span></span><span style=display:flex><span>vim.keymap.set(<span style=color:#b8bb26>&#34;n&#34;</span>, <span style=color:#b8bb26>&#34;&lt;leader&gt;gi&#34;</span>, vim.lsp.buf.implementation,
</span></span><span style=display:flex><span>	{ noremap <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, silent <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Go to implementation [LSP]&#34;</span> })
</span></span><span style=display:flex><span>vim.keymap.set(<span style=color:#b8bb26>&#34;n&#34;</span>, <span style=color:#b8bb26>&#34;&lt;leader&gt;gr&#34;</span>, vim.lsp.buf.references,
</span></span><span style=display:flex><span>	{ noremap <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, silent <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Go to references [LSP]&#34;</span> })
</span></span><span style=display:flex><span>vim.keymap.set(<span style=color:#b8bb26>&#34;n&#34;</span>, <span style=color:#b8bb26>&#34;&lt;leader&gt;gy&#34;</span>, vim.lsp.buf.type_definition,
</span></span><span style=display:flex><span>	{ noremap <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, silent <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Go to type definition [LSP]&#34;</span> })
</span></span><span style=display:flex><span>vim.keymap.set(<span style=color:#b8bb26>&#34;n&#34;</span>, <span style=color:#b8bb26>&#34;&lt;leader&gt;rn&#34;</span>, vim.lsp.buf.rename, { noremap <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, silent <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Rename [LSP]&#34;</span> })
</span></span><span style=display:flex><span>vim.keymap.set(<span style=color:#b8bb26>&#34;n&#34;</span>, <span style=color:#b8bb26>&#34;&lt;leader&gt;fs&#34;</span>, vim.lsp.buf.format, { noremap <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, silent <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, desc <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;Format [LSP]&#34;</span> })
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>----------------</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>-- Automation --</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>----------------</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>-- https://github.com/brainfucksec/neovim-lua/blob/dc7ba6f850bd576b3777ab56d081aa845ed5c946/nvim/lua/core/autocmds.lua</span>
</span></span><span style=display:flex><span><span style=color:#fe8019>local</span> augroup <span style=color:#fe8019>=</span> vim.api.nvim_create_augroup <span style=color:#928374;font-style:italic>-- Create/get autocommand group</span>
</span></span><span style=display:flex><span><span style=color:#fe8019>local</span> autocmd <span style=color:#fe8019>=</span> vim.api.nvim_create_autocmd <span style=color:#928374;font-style:italic>-- Create autocommand</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>-- Highlight on yank</span>
</span></span><span style=display:flex><span>augroup(<span style=color:#b8bb26>&#34;YankHighlight&#34;</span>, { clear <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span> })
</span></span><span style=display:flex><span>autocmd(<span style=color:#b8bb26>&#34;TextYankPost&#34;</span>, {
</span></span><span style=display:flex><span>	group <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;YankHighlight&#34;</span>,
</span></span><span style=display:flex><span>	callback <span style=color:#fe8019>=</span> <span style=color:#fe8019>function</span>()
</span></span><span style=display:flex><span>		vim.highlight.on_yank({ higroup <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;IncSearch&#34;</span>, timeout <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;1000&#34;</span> })
</span></span><span style=display:flex><span>	<span style=color:#fe8019>end</span>,
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>-- Don&#39;t auto commenting new lines</span>
</span></span><span style=display:flex><span>autocmd(<span style=color:#b8bb26>&#34;BufEnter&#34;</span>, {
</span></span><span style=display:flex><span>	pattern <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;&#34;</span>,
</span></span><span style=display:flex><span>	command <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;set fo-=c fo-=r fo-=o&#34;</span>,
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>-- let cursor in the middle of screen when entering vim</span>
</span></span><span style=display:flex><span>autocmd(<span style=color:#b8bb26>&#34;VimEnter&#34;</span>, { command <span style=color:#fe8019>=</span> vim.cmd.normal(<span style=color:#b8bb26>&#39;</span><span style=color:#b8bb26>\z</span><span style=color:#b8bb26>z&#34;&#39;</span>) })
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>-- return to last edit position when opening files</span>
</span></span><span style=display:flex><span>autocmd(<span style=color:#b8bb26>&#34;BufReadPost&#34;</span>, {
</span></span><span style=display:flex><span>	callback <span style=color:#fe8019>=</span> <span style=color:#fe8019>function</span>()
</span></span><span style=display:flex><span>		<span style=color:#fe8019>if</span> vim.fn.line(<span style=color:#b8bb26>&#34;&#39;</span><span style=color:#b8bb26>\&#34;</span><span style=color:#b8bb26>&#34;</span>) <span style=color:#fe8019>&gt;</span> <span style=color:#d3869b>0</span> <span style=color:#fe8019>and</span> vim.fn.line(<span style=color:#b8bb26>&#34;&#39;</span><span style=color:#b8bb26>\&#34;</span><span style=color:#b8bb26>&#34;</span>) <span style=color:#fe8019>&lt;=</span> vim.fn.line(<span style=color:#b8bb26>&#34;$&#34;</span>) <span style=color:#fe8019>then</span>
</span></span><span style=display:flex><span>			vim.cmd.normal(<span style=color:#b8bb26>&#39;g`&#34;&#39;</span>)
</span></span><span style=display:flex><span>		<span style=color:#fe8019>end</span>
</span></span><span style=display:flex><span>	<span style=color:#fe8019>end</span>,
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>-- Autoformat on save</span>
</span></span><span style=display:flex><span>vim.api.nvim_create_autocmd(<span style=color:#b8bb26>&#34;BufWritePre&#34;</span>, {
</span></span><span style=display:flex><span>	buffer <span style=color:#fe8019>=</span> buffer,
</span></span><span style=display:flex><span>	callback <span style=color:#fe8019>=</span> <span style=color:#fe8019>function</span>()
</span></span><span style=display:flex><span>		vim.lsp.buf.format { async <span style=color:#fe8019>=</span> <span style=color:#fe8019>false</span> }
</span></span><span style=display:flex><span>	<span style=color:#fe8019>end</span>
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>-- Check if file changed on disk</span>
</span></span><span style=display:flex><span>autocmd(<span style=color:#b8bb26>&#34;FileChangedShellPost&#34;</span>, {
</span></span><span style=display:flex><span>	callback <span style=color:#fe8019>=</span> <span style=color:#fe8019>function</span>()
</span></span><span style=display:flex><span>		vim.api.nvim_echo({ { <span style=color:#b8bb26>&#34;File changed on disk. Buffer reloaded.&#34;</span>, <span style=color:#b8bb26>&#34;WarningMsg&#34;</span> } }, <span style=color:#fe8019>true</span>, {})
</span></span><span style=display:flex><span>		vim.api.nvim_command(<span style=color:#b8bb26>&#39;checktime&#39;</span>)
</span></span><span style=display:flex><span>	<span style=color:#fe8019>end</span>
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>-- Set up a timer to run the &#39;fresh&#39; function every 5000 milliseconds</span>
</span></span><span style=display:flex><span><span style=color:#fe8019>local</span> timer <span style=color:#fe8019>=</span> vim.loop.new_timer()
</span></span><span style=display:flex><span>timer:start(<span style=color:#d3869b>5000</span>, <span style=color:#d3869b>0</span>, vim.schedule_wrap(<span style=color:#fe8019>function</span>()
</span></span><span style=display:flex><span>	<span style=color:#928374;font-style:italic>-- Check if buffer &#34;[Command Line]&#34; exists and then perform a checktime</span>
</span></span><span style=display:flex><span>	<span style=color:#fe8019>if</span> vim.fn.bufexists(<span style=color:#b8bb26>&#34;[Command Line]&#34;</span>) <span style=color:#fe8019>==</span> <span style=color:#fe8019>false</span> <span style=color:#fe8019>then</span>
</span></span><span style=display:flex><span>		vim.api.nvim_command(<span style=color:#b8bb26>&#39;checktime&#39;</span>)
</span></span><span style=display:flex><span>	<span style=color:#fe8019>end</span>
</span></span><span style=display:flex><span><span style=color:#fe8019>end</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>------------</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>-- Editor --</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>------------</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>-- https://github.com/arturgoms/nvim/blob/a8c23e36010746c6bc8e6b6b567433894833ca1d/lua/user/options.lua</span>
</span></span><span style=display:flex><span><span style=color:#fe8019>local</span> options <span style=color:#fe8019>=</span> {
</span></span><span style=display:flex><span>	updatetime <span style=color:#fe8019>=</span> <span style=color:#d3869b>300</span>,    <span style=color:#928374;font-style:italic>-- faster completion (4000ms default)</span>
</span></span><span style=display:flex><span>	autoindent <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>,   <span style=color:#928374;font-style:italic>-- copy indent from current line when starting new</span>
</span></span><span style=display:flex><span>	smartindent <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>,  <span style=color:#928374;font-style:italic>-- make indenting smarter again</span>
</span></span><span style=display:flex><span>	timeoutlen <span style=color:#fe8019>=</span> <span style=color:#d3869b>1000</span>,   <span style=color:#928374;font-style:italic>-- time to wait for a mapped sequence to complete (in milliseconds)</span>
</span></span><span style=display:flex><span>	encoding <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;utf-8&#34;</span>,  <span style=color:#928374;font-style:italic>-- the encoding written to a file</span>
</span></span><span style=display:flex><span>	fileencoding <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;utf-8&#34;</span>, <span style=color:#928374;font-style:italic>-- the encoding written to a file</span>
</span></span><span style=display:flex><span>	scrolloff <span style=color:#fe8019>=</span> <span style=color:#d3869b>2</span>,       <span style=color:#928374;font-style:italic>-- minimal number of screen lines to keep above and below the cursor</span>
</span></span><span style=display:flex><span>	showmode <span style=color:#fe8019>=</span> <span style=color:#fe8019>false</span>,    <span style=color:#928374;font-style:italic>-- we don&#39;t need to see things like -- INSERT -- anymore</span>
</span></span><span style=display:flex><span>	hidden <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>,       <span style=color:#928374;font-style:italic>-- allow buffer switching without saving</span>
</span></span><span style=display:flex><span>	wrap <span style=color:#fe8019>=</span> <span style=color:#fe8019>false</span>,        <span style=color:#928374;font-style:italic>-- don&#39;t wrap lines</span>
</span></span><span style=display:flex><span>	joinspaces <span style=color:#fe8019>=</span> <span style=color:#fe8019>false</span>,  <span style=color:#928374;font-style:italic>-- insert two spaces after a &#39;.&#39;, &#39;?&#39; and &#39;!&#39;</span>
</span></span><span style=display:flex><span>	signcolumn <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;yes&#34;</span>,  <span style=color:#928374;font-style:italic>-- always show the sign column, otherwise it would shift the text each time</span>
</span></span><span style=display:flex><span>	splitright <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>,   <span style=color:#928374;font-style:italic>-- force all vertical splits to go to the right of current window</span>
</span></span><span style=display:flex><span>	splitbelow <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>,   <span style=color:#928374;font-style:italic>-- force all horizontal splits to go below current window</span>
</span></span><span style=display:flex><span>	incsearch <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>,    <span style=color:#928374;font-style:italic>-- incremental search</span>
</span></span><span style=display:flex><span>	ignorecase <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>,   <span style=color:#928374;font-style:italic>-- ignore case</span>
</span></span><span style=display:flex><span>	smartcase <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>,    <span style=color:#928374;font-style:italic>-- smart case</span>
</span></span><span style=display:flex><span>	gdefault <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>,     <span style=color:#928374;font-style:italic>-- use g flag on search</span>
</span></span><span style=display:flex><span>	<span style=color:#928374;font-style:italic>-- nobackup + writebackup = backup current file, deleted afterwards (default)</span>
</span></span><span style=display:flex><span>	backup <span style=color:#fe8019>=</span> <span style=color:#fe8019>false</span>,
</span></span><span style=display:flex><span>	writebackup <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>,
</span></span><span style=display:flex><span>	swapfile <span style=color:#fe8019>=</span> <span style=color:#fe8019>false</span>,
</span></span><span style=display:flex><span>	tabstop <span style=color:#fe8019>=</span> <span style=color:#d3869b>4</span>,          <span style=color:#928374;font-style:italic>-- insert 4 spaces for a tab</span>
</span></span><span style=display:flex><span>	softtabstop <span style=color:#fe8019>=</span> <span style=color:#d3869b>4</span>,      <span style=color:#928374;font-style:italic>-- insert 4 spaces for a tab</span>
</span></span><span style=display:flex><span>	expandtab <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>,     <span style=color:#928374;font-style:italic>-- convert tabs to spaces</span>
</span></span><span style=display:flex><span>	shiftwidth <span style=color:#fe8019>=</span> <span style=color:#d3869b>4</span>,       <span style=color:#928374;font-style:italic>-- the number of spaces inserted for each indentation</span>
</span></span><span style=display:flex><span>	virtualedit <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;onemore&#34;</span>, <span style=color:#928374;font-style:italic>-- allow the cursor to move just past the end of the line</span>
</span></span><span style=display:flex><span>	mouse <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;a&#34;</span>,          <span style=color:#928374;font-style:italic>-- allow the mouse to be used in neovim</span>
</span></span><span style=display:flex><span>	cmdheight <span style=color:#fe8019>=</span> <span style=color:#d3869b>1</span>,        <span style=color:#928374;font-style:italic>-- more space in the neovim command line for displaying messages</span>
</span></span><span style=display:flex><span>	cursorline <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>,    <span style=color:#928374;font-style:italic>-- highlight the current line</span>
</span></span><span style=display:flex><span>	termguicolors <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>, <span style=color:#928374;font-style:italic>-- set term gui colors (most terminals support this)</span>
</span></span><span style=display:flex><span>	number <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>,        <span style=color:#928374;font-style:italic>-- set numbered lines</span>
</span></span><span style=display:flex><span>	numberwidth <span style=color:#fe8019>=</span> <span style=color:#d3869b>4</span>,      <span style=color:#928374;font-style:italic>-- set number column width to 2 {default 4}</span>
</span></span><span style=display:flex><span>	conceallevel <span style=color:#fe8019>=</span> <span style=color:#d3869b>0</span>,     <span style=color:#928374;font-style:italic>-- so that `` is visible in markdown files</span>
</span></span><span style=display:flex><span>	history <span style=color:#fe8019>=</span> <span style=color:#d3869b>1000</span>,       <span style=color:#928374;font-style:italic>-- sets how many lines of history VIM has to remember</span>
</span></span><span style=display:flex><span>	modifiable <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>,    <span style=color:#928374;font-style:italic>-- allow changing the buffer</span>
</span></span><span style=display:flex><span>	autoread <span style=color:#fe8019>=</span> <span style=color:#fe8019>true</span>,      <span style=color:#928374;font-style:italic>-- automatically read changed files</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#fe8019>for</span> k, v <span style=color:#fe8019>in</span> pairs(options) <span style=color:#fe8019>do</span>
</span></span><span style=display:flex><span>	vim.opt[k] <span style=color:#fe8019>=</span> v
</span></span><span style=display:flex><span><span style=color:#fe8019>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>vim.opt.wildignore:append({ <span style=color:#b8bb26>&#34;*.o&#34;</span>, <span style=color:#b8bb26>&#34;*.obj&#34;</span>, <span style=color:#b8bb26>&#34;*.pyc&#34;</span> })
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>-- let labels not auto indent</span>
</span></span><span style=display:flex><span>vim.opt.cinoptions:append({ <span style=color:#b8bb26>&#34;L0&#34;</span> })
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>------------</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>-- Legacy --</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>------------</span>
</span></span><span style=display:flex><span>vim.api.nvim_exec(
</span></span><span style=display:flex><span>	<span style=color:#b8bb26>[[
</span></span></span><span style=display:flex><span><span style=color:#b8bb26>&#34; let undo history not be clear after changing buffer
</span></span></span><span style=display:flex><span><span style=color:#b8bb26>&#34; Ref: https://stackoverflow.com/a/22676189/6734174
</span></span></span><span style=display:flex><span><span style=color:#b8bb26>let vimDir = &#39;$HOME/.config/nvim/&#39;
</span></span></span><span style=display:flex><span><span style=color:#b8bb26>let &amp;runtimepath .= &#39;,&#39; . vimDir
</span></span></span><span style=display:flex><span><span style=color:#b8bb26>&#34; Keep undo history across sessions by storing it in a file
</span></span></span><span style=display:flex><span><span style=color:#b8bb26>if has(&#39;persistent_undo&#39;)
</span></span></span><span style=display:flex><span><span style=color:#b8bb26>    let myUndoDir = expand(vimDir . &#39;/undodir&#39;)
</span></span></span><span style=display:flex><span><span style=color:#b8bb26>    &#34; Create dirs
</span></span></span><span style=display:flex><span><span style=color:#b8bb26>    silent! call mkdir(myUndoDir, &#39;p&#39;)
</span></span></span><span style=display:flex><span><span style=color:#b8bb26>    let &amp;undodir = myUndoDir
</span></span></span><span style=display:flex><span><span style=color:#b8bb26>    set undofile
</span></span></span><span style=display:flex><span><span style=color:#b8bb26>    set undolevels=1000
</span></span></span><span style=display:flex><span><span style=color:#b8bb26>    set undoreload=10000
</span></span></span><span style=display:flex><span><span style=color:#b8bb26>endif
</span></span></span><span style=display:flex><span><span style=color:#b8bb26>
</span></span></span><span style=display:flex><span><span style=color:#b8bb26>&#34; TMUX key
</span></span></span><span style=display:flex><span><span style=color:#b8bb26>&#34; Ref: https://superuser.com/a/402084
</span></span></span><span style=display:flex><span><span style=color:#b8bb26>if &amp;term =~ &#39;^screen&#39;
</span></span></span><span style=display:flex><span><span style=color:#b8bb26>    &#34; tmux will send xterm-style keys when its xterm-keys option is on
</span></span></span><span style=display:flex><span><span style=color:#b8bb26>    execute &#34;set &lt;xUp&gt;=\e[1;*A&#34;
</span></span></span><span style=display:flex><span><span style=color:#b8bb26>    execute &#34;set &lt;xDown&gt;=\e[1;*B&#34;
</span></span></span><span style=display:flex><span><span style=color:#b8bb26>    execute &#34;set &lt;xRight&gt;=\e[1;*C&#34;
</span></span></span><span style=display:flex><span><span style=color:#b8bb26>    execute &#34;set &lt;xLeft&gt;=\e[1;*D&#34;
</span></span></span><span style=display:flex><span><span style=color:#b8bb26>endif
</span></span></span><span style=display:flex><span><span style=color:#b8bb26>]]</span>,
</span></span><span style=display:flex><span>	<span style=color:#fe8019>false</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>----------------------</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>-- disable provider --</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>----------------------</span>
</span></span><span style=display:flex><span>vim.g.loaded_node_provider <span style=color:#fe8019>=</span> <span style=color:#d3869b>0</span>
</span></span><span style=display:flex><span>vim.g.loaded_perl_provider <span style=color:#fe8019>=</span> <span style=color:#d3869b>0</span>
</span></span><span style=display:flex><span>vim.g.loaded_ruby_provider <span style=color:#fe8019>=</span> <span style=color:#d3869b>0</span>
</span></span></code></pre></div></details><h1 id=epilogue class=article-heading>Epilogue
<a class="headline-hash smoothScroll hover-show scrollspy" style=font-size:.75em;color:#000;padding-left:.25em href=#epilogue><span class=iconify data-icon=octicon-link data-inline=false></span></a></h1><p>Finally, all configurations are in place. However, these settings might undergo frequent modifications as I use this version. The journey to transition to Lua support has been lengthy but rewarding. Let&rsquo;s continue to explore and refine.</p><p><em>Chat-GPT has fine-tuned some grammar and words of this post.</em></p><h1 id=references class=article-heading>References
<a class="headline-hash smoothScroll hover-show scrollspy" style=font-size:.75em;color:#000;padding-left:.25em href=#references><span class=iconify data-icon=octicon-link data-inline=false></span></a></h1><ul><li><a href=https://github.com/neovim/neovim/issues/21686 title="neovim/neovim - LSP: Undefined global &amp;ldquo;vim&amp;rdquo; when using lua-language-server with custom lua config file #21686" aria-label="neovim/neovim - LSP: Undefined global &amp;ldquo;vim&amp;rdquo; when using lua-language-server with custom lua config file #21686" target=_blank rel="noreferrer noopener"><i class="fas fa-external-link-square-alt"></i> neovim/neovim - LSP: Undefined global &ldquo;vim&rdquo; when using lua-language-server with custom lua config file #21686</a></li><li><a href=https://github.com/brainfucksec/neovim-lua/blob/dc7ba6f850bd576b3777ab56d081aa845ed5c946/nvim/lua/core/autocmds.lua title=brainfucksec/neovim-lua/nvim/lua/core/autocmds.lua aria-label=brainfucksec/neovim-lua/nvim/lua/core/autocmds.lua target=_blank rel="noreferrer noopener"><i class="fas fa-external-link-square-alt"></i> brainfucksec/neovim-lua/nvim/lua/core/autocmds.lua</a></li><li><a href=https://github.com/arturgoms/nvim/blob/a8c23e36010746c6bc8e6b6b567433894833ca1d/lua/user/options.lua title=arturgoms/nvim/lua/user/options.lua aria-label=arturgoms/nvim/lua/user/options.lua target=_blank rel="noreferrer noopener"><i class="fas fa-external-link-square-alt"></i> arturgoms/nvim/lua/user/options.lua</a></li></ul><div class=footnotes role=doc-endnotes><h1 id=footnotes class=article-heading>Footnotes
<a class="headline-hash smoothScroll hover-show scrollspy" style=font-size:.75em;color:#000;padding-left:.25em href=#footnotes><span class=iconify data-icon=octicon-link data-inline=false></span></a><style>#footnotes::before{content:none}</style></h1><ol><li id=fn:1><p><a href=https://github.com/aben20807/vim-runner title=aben20807/vim-runner aria-label=aben20807/vim-runner target=_blank rel="noreferrer noopener"><i class="fas fa-external-link-square-alt"></i> aben20807/vim-runner</a>&#160;<sup><a href=#fnref:1 class="smoothScroll footnote-backref no-underline-on-hover" role=doc-backlink>&#8617;&#xfe0e;</a></sup></p></li><li id=fn:2><p><a href=https://github.com/aben20807/vim-commenter title=aben20807/vim-commenter aria-label=aben20807/vim-commenter target=_blank rel="noreferrer noopener"><i class="fas fa-external-link-square-alt"></i> aben20807/vim-commenter</a>&#160;<sup><a href=#fnref:2 class="smoothScroll footnote-backref no-underline-on-hover" role=doc-backlink>&#8617;&#xfe0e;</a></sup></p></li><li id=fn:3><p><a href=https://github.com/aben20807/aben20807.vim/commit/3f9f6a5e4d75fb1091315b6490d1efa081437fb8 title="aben20807/aben20807.vim committed on May 10, 2021" aria-label="aben20807/aben20807.vim committed on May 10, 2021" target=_blank rel="noreferrer noopener"><i class="fas fa-external-link-square-alt"></i> aben20807/aben20807.vim committed on May 10, 2021</a>&#160;<sup><a href=#fnref:3 class="smoothScroll footnote-backref no-underline-on-hover" role=doc-backlink>&#8617;&#xfe0e;</a></sup></p></li><li id=fn:4><p><a href=https://github.com/aben20807/dotfiles/blob/1aa47fc9df70ba730cc2615b2733fdf9d5886efb/dotfiles/.config/nvim/init.vim title="my original init.vim" aria-label="my original init.vim" target=_blank rel="noreferrer noopener"><i class="fas fa-external-link-square-alt"></i> my original init.vim</a>&#160;<sup><a href=#fnref:4 class="smoothScroll footnote-backref no-underline-on-hover" role=doc-backlink>&#8617;&#xfe0e;</a></sup></p></li><li id=fn:5><p><a href=https://github.com/aben20807/vim-commenter/commit/ba88ba63a228e8b8ef1782d1889061c04b4691cb title="Add comment format for lua" aria-label="Add comment format for lua" target=_blank rel="noreferrer noopener"><i class="fas fa-external-link-square-alt"></i> Add comment format for lua</a>&#160;<sup><a href=#fnref:5 class="smoothScroll footnote-backref no-underline-on-hover" role=doc-backlink>&#8617;&#xfe0e;</a></sup></p></li></ol></div><div class=footer><div class="column center tc"><div id=license-block><dl style=font-size:80%><dt class=license>Author:</dt><dd class=license>Huang, Po-Hsuan 黃柏瑄</dd><dt class=license>Last modified:</dt><dd class=license>Nov 21, 2023</dd><dt class=license>License:</dt><dd class=license><a href=https://creativecommons.org/licenses/by/4.0/ target=_blank rel="noreferrer noopener">CC BY 4.0</a></dd><dt class=license>Link:</dt><dd class=license><span style=margin-right:.5rem>https://aben20807.github.io/posts/20231103-to-lua-or-not-to-lua/</span></dd></dl></div><div class=mb3><span class=tags-sm><a onclick=copyToClip() role=button class="no-underline no-underline-on-hover" title="Copy the license block" style=cursor:pointer!important;white-space:nowrap><i class="far fa-clipboard"></i> Copy license</a></span></div><script>function copyToClip(){let o=document.getElementById("license-block"),t=document.querySelectorAll("dt.license"),n=document.querySelectorAll("dd.license"),e=document.createElement("textarea");for(let s=0;s<t.length;s++)e.value+=t[s].textContent+" "+n[s].textContent,s<t.length-1&&(e.value+="; ");document.body.appendChild(e),e.select(),document.execCommand("Copy"),e.remove();const s=new XNotify("BottomLeft");s.info({borderRadius:"2px",content:"copied!",duration:3e3,background:"#646464"})}</script><div><script type=text/javascript>document.write("<iframe scrolling='no' frameborder='0' class='center' sandbox='allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox allow-storage-access-by-user-activation' style='' src='https://button.like.co/in/embed/aben20807/button?referrer="+encodeURIComponent(location.href.split("?")[0].split("#")[0])+"'></iframe>")</script></div><div class="col tl" style=font-size:95%!important><div class="nested-links fl w-100"><a title="Prev: Windows Batch to Convert all pptx to pdf" class="link-reverse fl w-100 truncate" href=https://aben20807.github.io/posts/20230907-windows-batch-convert-all-pptx-to-pdf/><i class="fas fa-caret-square-up"></i> Windows Batch to Convert all pptx to pdf<p class="footer-summary ml3 mb1">在使用 FileLocator (使用 FileLocator 在資料夾中搜尋文件內容) 時發現在 pdf 中找會比 pptx 準確。換句話說，有些關鍵字在 pptx 中找不到的，把 pptx 匯成 pdf 後就可以被找到。為了不要手動一個一個匯出，我們就需要一個可以大量轉換的工具。</p></a></div><div class="nested-links fl w-100"><a title="Next: 繁體中文.tex" class="link-reverse fl w-100 truncate" href=https://aben20807.github.io/posts/20231107-traditional-chinese-latex/><i class="fas fa-caret-square-down"></i> 繁體中文.tex<p class="footer-summary ml3 mb1">以我目前經驗，在資訊界還是有用中文寫報告的機會，例如一些計畫的期中期末報告，通常會有給 word 檔案來遵守現有的格式。但如果什麼都沒有，又不想用 word，那 latex 可能是協作下又保有好看格式的好幫手。
此篇文章提供一個簡易的繁體中文設定，並改良之前 Latex Examples 提供的程式碼設定。</p></a></div><div class=mb2><div class="nested-links fl w-100"><a title="Related: Weekly Collection" class="link-reverse fl w-100 truncate" href=https://aben20807.github.io/posts/20220704-weekly-collection/><i class="fas fa-seedling"></i> Weekly Collection<p class="footer-summary ml3 mb1">資訊大爆炸，留下一些看過的痕跡 (不知道會持續更新多久 OuO)。</p></a></div><div class="nested-links fl w-100"><a title="Related: Find and Count Words Using Vim" class="link-reverse fl w-100 truncate" href=https://aben20807.github.io/posts/20211204-find-and-count-words-using-vim/><i class="fas fa-seedling"></i> Find and Count Words Using Vim<p class="footer-summary ml3 mb1">用 vim 計算出現次數</p></a></div></div></div></div><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//forrecording.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></article></div><div id=toc class="column col-2 hide-print"><div class="toc toc-nav toc-pills ml-0 col-3"><li class="nav-item pb-3 text-center"><span class="font-weight-bold mb-2 serif">- CATALOG -</span></li><div id=toc-scroll class="noselect hide-scrollbar"><ul class=toc><li class=toc-item><a class="toc-link smoothScroll" href=#prologue>1.
Prologue</a></li></ul><ul class=toc><li class=toc-item><a class="toc-link smoothScroll" href=#lua-for-neovim>2.
Lua for Neovim</a></li></ul><ul class=toc><li class=toc-item><a class="toc-link smoothScroll" href=#my-environments>3.
My environments</a></li></ul><ul class=toc><ul class=toc><li class=toc-item><a class="toc-link smoothScroll" href=#recommended-font>3.1.
Recommended font</a></li></ul></ul><ul class=toc><ul class=toc><li class=toc-item><a class="toc-link smoothScroll" href=#preinstall-packages>3.2.
Preinstall packages</a></li></ul></ul><ul class=toc><li class=toc-item><a class="toc-link smoothScroll" href=#install-neovim>4.
Install Neovim</a></li></ul><ul class=toc><ul class=toc><li class=toc-item><a class="toc-link smoothScroll" href=#setup-for-virtual-environment>4.1.
Setup for Virtual Environment</a></li></ul></ul><ul class=toc><ul class=toc><ul class=toc><li class=toc-item><a class="toc-link smoothScroll" href=#install-pyenv-and-target-python-version>4.1.1.
Install pyenv and target python version</a></li></ul></ul></ul><ul class=toc><ul class=toc><ul class=toc><li class=toc-item><a class="toc-link smoothScroll" href=#setup-for-neovim>4.1.2.
Setup for neovim</a></li></ul></ul></ul><ul class=toc><li class=toc-item><a class="toc-link smoothScroll" href=#config-via-lua>5.
Config via Lua</a></li></ul><ul class=toc><ul class=toc><li class=toc-item><a class="toc-link smoothScroll" href=#mapping-from-viml-to-lua>5.1.
Mapping from VimL to Lua</a></li></ul></ul><ul class=toc><ul class=toc><ul class=toc><li class=toc-item><a class="toc-link smoothScroll" href=#key-value-assignment>5.1.1.
key-value assignment</a></li></ul></ul></ul><ul class=toc><ul class=toc><ul class=toc><li class=toc-item><a class="toc-link smoothScroll" href=#onoff-setting>5.1.2.
on/off setting</a></li></ul></ul></ul><ul class=toc><ul class=toc><ul class=toc><li class=toc-item><a class="toc-link smoothScroll" href=#value-append>5.1.3.
value append</a></li></ul></ul></ul><ul class=toc><ul class=toc><ul class=toc><li class=toc-item><a class="toc-link smoothScroll" href=#global-plugin-functions>5.1.4.
global, plugin functions</a></li></ul></ul></ul><ul class=toc><ul class=toc><ul class=toc><li class=toc-item><a class="toc-link smoothScroll" href=#exec-normal>5.1.5.
exec normal</a></li></ul></ul></ul><ul class=toc><ul class=toc><ul class=toc><li class=toc-item><a class="toc-link smoothScroll" href=#autocmd>5.1.6.
autocmd</a></li></ul></ul></ul><ul class=toc><ul class=toc><ul class=toc><li class=toc-item><a class="toc-link smoothScroll" href=#keymap>5.1.7.
keymap</a></li></ul></ul></ul><ul class=toc><ul class=toc><li class=toc-item><a class="toc-link smoothScroll" href=#plugins>5.2.
Plugins</a></li></ul></ul><ul class=toc><ul class=toc><ul class=toc><li class=toc-item><a class="toc-link smoothScroll" href=#plugin-manager-lazynvim>5.2.1.
Plugin Manager: Lazy.nvim</a></li></ul></ul></ul><ul class=toc><ul class=toc><ul class=toc><li class=toc-item><a class="toc-link smoothScroll" href=#selected-plugins>5.2.2.
Selected plugins</a></li></ul></ul></ul><ul class=toc><ul class=toc><li class=toc-item><a class="toc-link smoothScroll" href=#one-for-all-initlua>5.3.
One for All: init.lua</a></li></ul></ul><ul class=toc><li class=toc-item><a class="toc-link smoothScroll" href=#epilogue>6.
Epilogue</a></li></ul><ul class=toc><li class=toc-item><a class="toc-link smoothScroll" href=#references>7.
References</a></li></ul></div><ul class=toc><li class=toc-item><a class='goto pl1 toc-item' id=gotop>⊛ Back to top</a></li><li class=toc-item><a class='goto pl1 toc-item' id=gobottom>⊛ Go to bottom</a></li><script type=text/javascript>fetchInject(["https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js"]).then(()=>{var e="https://cdnjs.cloudflare.com/ajax/libs/jquery-smooth-scroll/2.2.0/jquery.smooth-scroll.min.js";$.getScript(e,function(){$("#gotop").click(function(){$("html,body").animate({scrollTop:0},300,"swing",function(){$("a.toc-link").removeClass("active")})}),$("#gobottom").click(function(){$("html,body").animate({scrollTop:$(document).height()},300,"swing",function(){$("a.toc-link").removeClass("active")})})})})</script></ul></div></div></div></main><div id=gotop_btn class="post-meta center"><center><i class="fas fa-chevron-up tc-ns justify-center-l v-mid-l pt2"></i></center></div><footer class="hide-print sans-serif f6 fw1 bg-black near-white bottom-0 w-100 pa3 db overflow-auto" role=contentinfo><p class="w-50 fr tr nested-links" style=font-size:.875rem!important>Made with Hugo and
<a class="no-underline no-underline-on-hover" href=https://github.com/aben20807/hugOuO target=_blank rel="noreferrer noopener">hugOuO</a></p><p class="w-50 near-white" style=font-size:.875rem!important>&copy; 2019-2024 Huang, Po-Hsuan 黃柏瑄</p></footer><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js></script>
<script type=text/javascript src=https://aben20807.github.io/js/hugouo.js?1704445882 async></script>
<script type=text/javascript src=https://aben20807.github.io/js/x-notify.min.js async></script>
<script src=https://aben20807.github.io/js/story.js async></script>
<script>fetchInject(["https://cdn.jsdelivr.net/npm/baffle@0.3.6/dist/baffle.min.js"]).then(()=>{baffle(document.querySelector("h1")).start().set({speed:70}).reveal(800,800)})</script><script>MathJax={startup:{requireMap:{AMSmath:"ams",AMSsymbols:"ams",AMScd:"amscd",HTML:"html",noErrors:"noerrors",noUndefined:"noundefined"}},tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"]],tags:"ams"},skipTags:["script","noscript","style","textarea","pre"],svg:{fontCache:"global",scale:1},chtml:{scale:1}}</script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@4.0.0-beta.4/tex-mml-chtml.js></script><script type=text/javascript src=https://aben20807.github.io/js/zooming.min.js></script>
<script>document.addEventListener("DOMContentLoaded",function(){let e=document.querySelector("body"),t=document.querySelectorAll(".ov-for-img");new Zooming({bgColor:"rgb(0, 0, 0)",bgOpacity:"0.8",customSize:"200%",enableGrab:!1,onBeforeOpen:()=>{t.forEach(e=>e.classList.remove("overflow-x-scroll")),e.style.overflowX="visible"},onClose:()=>{t.forEach(e=>e.classList.add("overflow-x-scroll")),e.style.overflowX="hidden"}}).listen(".img-zoomable")})</script></body></html>