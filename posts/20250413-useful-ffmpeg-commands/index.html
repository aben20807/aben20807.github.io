<!doctype html><html lang=zh><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Useful ffmpeg Commands</title><link rel=preconnect href="https://images.unsplash.com/photo-1696579810244-9d89492b1995?q=80&amp;w=720&amp;auto=format&amp;fit=crop&amp;ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"><link rel=dns-prefetch href="https://images.unsplash.com/photo-1696579810244-9d89492b1995?q=80&amp;w=720&amp;auto=format&amp;fit=crop&amp;ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"><link rel=preload href="https://images.unsplash.com/photo-1696579810244-9d89492b1995?q=80&amp;w=720&amp;auto=format&amp;fit=crop&amp;ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" as=image><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=prefetch href=https://fonts.googleapis.com/earlyaccess/notosanstc.css as=style><link rel=preconnect href=https://use.fontawesome.com crossorigin><link rel=preload href=https://aben20807.github.io/js/hugouo.js?1768737499 as=script><link rel=preconnect href=https://lh3.googleusercontent.com crossorigin><link rel=prefetch href=https://aben20807.github.io/css/tachyons.min.css?1768737499 as=style><link rel=prefetch href=https://aben20807.github.io/css/hugouo.css?1768737499 as=style><link rel=alternate type=application/rss+xml title=RSS href=https://aben20807.github.io/index.xml><link rel=canonical href=https://aben20807.github.io/posts/20250413-useful-ffmpeg-commands/><link rel="shortcut icon" type=image/png href=https://aben20807.github.io/apple-touch-icon-precomposed.png><meta name=description content="記錄所見所聞，涵蓋電腦科學、資訊工程與日常生活。Documenting observations and experiences, encompassing computer science, information engineering, and everyday life."><meta name=generator content="Hugo 0.152.2"><meta name=og:title content="Useful ffmpeg Commands"><meta name=og:type content="article"><meta name=og:image content="https://images.unsplash.com/photo-1696579810244-9d89492b1995?q=80&amp;w=720&amp;auto=format&amp;fit=crop&amp;ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"><meta name=og:description content="A collection of frequently used ffmpeg commands"><meta name=og:url content="https://aben20807.github.io/posts/20250413-useful-ffmpeg-commands/"><meta name=og:site_name content="記錄用"><meta name=keywords content="ffmpeg,gif,jpeg,jpg,pillow,python,video,webp,mp4"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@aben20807_web"><script src=https://cdn.jsdelivr.net/npm/fetch-inject@2.0.4/dist/fetch-inject.umd.min.js integrity="sha256-paKBtnIrL5ClLfBOtgxh1UqYCjL9790IRvDOnBh2LyI=" crossorigin=anonymous></script><link rel=stylesheet href=https://aben20807.github.io/css/tachyons.min.css async><link rel=stylesheet href=https://aben20807.github.io/css/hugouo.css?1768737499 async><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.5.0/css/all.css integrity=sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU crossorigin=anonymous async><link href="https://fonts.googleapis.com/css?family=Noto+Sans+TC:400,400i&amp;subset=latin-ext" rel=stylesheet async><script async src=https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.1/lazysizes.min.js></script><noscript><style type=text/css>.lazyload{display:none}</style></noscript><script async src=https://cdn.jsdelivr.net/npm/js-base64@3.7.7/base64.min.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-TCW0ZKBVFW"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-TCW0ZKBVFW")}</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8075275543045163" crossorigin=anonymous></script><meta name=referrer content="no-referrer"><meta name=robots content="index,follow"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"></head><body data-pagefind-body class="ma0 bg-main section-posts page-kind-page is-page-true"><header class="cover bg-top" style="background-image:url(https://images.unsplash.com/photo-1696579810244-9d89492b1995?q=80&amp;w=720&amp;auto=format&amp;fit=crop&amp;ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D);background-position:50%"><div class=bg-black-60><nav class="hide-print sans-serif border-box pa3 ph5-l"><a href=https://aben20807.github.io/ title=Home><img src=https://aben20807.github.io/img/logo.jpg class="w2 h2 br-100" alt=記錄用></a><div class="fr h2 pv2 tr" id=menu-bar><a class="link f4 ml2 dim near-white no-underline-on-hover" href=/categories/>分類</a><div class=subnav><span class="link f4 ml2 dim h-100 near-white no-underline-on-hover">More <i class="fa fa-caret-down"></i></span><div class=subnav-content><a class="link f4 ml2 dim ml2 w-100 dim near-white no-underline-on-hover" href=/tags/>標籤</a>
<a class="link f4 ml2 dim ml2 w-100 dim near-white no-underline-on-hover" href=/series/>系列</a>
<a class="link f4 ml2 dim ml2 w-100 dim near-white no-underline-on-hover" href=/archives/>歸檔</a>
<a class="link f4 ml2 dim ml2 w-100 dim near-white no-underline-on-hover" href=/note/>Note</a>
<a class="link f4 ml2 dim ml2 w-100 dim near-white no-underline-on-hover" href=/anime/>Anime</a>
<a class="link f4 ml2 dim ml2 w-100 dim near-white no-underline-on-hover" href=https://github.com/aben20807/blog-post-issues/issues target=_blank rel="noreferrer noopener">GitHub</a></div></div><a class="link f4 ml2 dim near-white no-underline-on-hover" href=/about>關於</a>
<a class="link f4 ml2 dim near-white fas fa-rss-square no-underline-on-hover" href=https://aben20807.github.io/index.xml title="RSS Feed"></a><a class="link f4 ml2 dim near-white fas fa-envelope no-underline-on-hover" href=https://aben20807.github.io/subscription/ role=button title=Subscription></a><a class="link f4 ml2 dim near-white fas fa-coffee no-underline-on-hover" href=https://www.buymeacoffee.com/aben20807 target=_blank title="Buy me a coffee"></a><a class="link f4 ml2 dim near-white fas fa-search no-underline-on-hover" href=https://aben20807.github.io/search/ title=Search></a><div class="js-toggle-wrapper f5 ml1" title="light-dark theme switch"><div class=js-toggle><div class=js-toggle-track><div class=js-toggle-track-check><img src="data:image/png;base64,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" role=presentation style=pointer-events:none width=16 height=16></div><div class=js-toggle-track-x><img src="data:image/png;base64,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" role=presentation style=pointer-events:none width=16 height=16></div></div><div class=js-toggle-thumb></div><input class=js-toggle-screenreader-only type=checkbox aria-label="Switch between Dark and Light mode"></div></div><style>.js-toggle-wrapper{display:inline;width:fit-content}.js-toggle{touch-action:pan-x;display:inline-block;position:relative;cursor:pointer;background-color:initial;border:0;padding:0;-webkit-touch-callout:none;user-select:none;-webkit-tap-highlight-color:transparent;-webkit-tap-highlight-color:transparent}.js-toggle-screenreader-only{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.js-toggle-track{width:2rem;height:.95rem;padding:0;border-radius:1.3rem;background-color:#0f1114;transition:all .2s ease}.js-toggle-track-check{position:absolute;width:.7rem;height:.7rem;left:.2rem;top:0;bottom:0;margin-top:auto;margin-bottom:auto;line-height:0;opacity:0;transition:opacity .25s ease}.js-toggle--checked .js-toggle-track-check{opacity:1;transition:opacity .25s ease}.js-toggle-track-x{position:absolute;width:.7rem;height:.7rem;right:.2rem;top:0;bottom:0;margin-top:auto;margin-bottom:auto;line-height:0;opacity:1;transition:opacity .25s ease}.js-toggle--checked .js-toggle-track-x{opacity:0}.js-toggle-thumb{position:absolute;top:.03rem;left:.03rem;width:.9rem;height:.9rem;border-radius:50%;background-color:#fafafa;box-sizing:border-box;transition:all .5s cubic-bezier(.23,1,.32,1)0ms;transform:translateX(0)}.js-toggle--checked .js-toggle-thumb{transform:translateX(1.05rem);border-color:#19ab27}.js-toggle--focus .js-toggle-thumb{box-shadow:0 0 2px 3px #ffa7c4}.js-toggle:active .js-toggle-thumb{box-shadow:0 0 5px 5px #ffa7c4}</style><script>var body=document.body,switcher=document.getElementsByClassName("js-toggle")[0];switcher.addEventListener("click",function(){this.classList.toggle("js-toggle--checked"),this.classList.add("js-toggle--focus"),this.classList.contains("js-toggle--checked")?(body.classList.add("dark-mode"),localStorage.setItem("darkMode","true")):(body.classList.remove("dark-mode"),setTimeout(function(){localStorage.removeItem("darkMode")},100))}),localStorage.getItem("darkMode")&&(switcher.classList.add("js-toggle--checked"),body.classList.add("dark-mode"))</script></div></nav><div id=hdr class="tc-l pv4-ns pv5-l pv2 ph3 ph4-ns"><h1 class="near-white mt1-ns f2 fw3 pt5 mb0 mt0 lh-title serif">Useful ffmpeg Commands</h1><img src="https://images.unsplash.com/photo-1696579810244-9d89492b1995?q=80&amp;w=720&amp;auto=format&amp;fit=crop&amp;ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Useful ffmpeg Commands" hidden><h2 class="near-white mt3-l mb4-l fw1 f6 f3-l measure-wide-l center lh-copy mt2 mb3 serif">Published
<time datetime=2025-04-13T09:54:20+08:00>Apr 13, 2025</time>
<span class=display-print>by Huang, Po-Hsuan 黃柏瑄 (aben20807)</span>
in <a href=https://aben20807.github.io/categories/%E8%BB%9F%E9%AB%94%E5%B7%A5%E5%85%B7 class="no-underline category title-link near-white dim">軟體工具</a>
<span class=display-print>at <a href=https://aben20807.github.io/posts/20250413-useful-ffmpeg-commands/>https://aben20807.github.io/posts/20250413-useful-ffmpeg-commands/</a></span></h2><h6 class="near-white fw1 f6 f5-l measure-wide-l center lh-copy hide-print serif"><span title="Word count: 614 words"><i class="far fa-file-alt"></i></i> 614 words</span> <span title="Reading time: 3 minutes"><i class="far fa-clock"></i> 3 minutes</span></h6></div><div class="w-100 cf hide-print"><a class="fr f6 ma0 pa2 link white-50 dim fas fa-camera" href=https://unsplash.com/photos/a-couple-of-tape-recorders-sitting-on-top-of-a-table-4znBwAoUR-k title="Photo Credit" target=_blank rel="noreferrer noopener"></a></div></div></header><main role=main><div class="row bg-main"><div id=toc class="column col-2 hide-print"></div><div class="column col-1 printable"><article class="center bg-main br-3 pv1 ph4 lh-copy f5" style=max-width:48rem><div class=pb4-ns><div class=row><div class=col-md-8><div class=mb-5><div class="li-x div-x post-meta"><li class=pr-0><a href=https://aben20807.github.io/tags/ style=border:0><i class="fas fa-tags"></i></a></li><span class=tags-sm><li><a href=https://aben20807.github.io/tags/ffmpeg role=button class="no-underline no-underline-on-hover">ffmpeg</a></li><li><a href=https://aben20807.github.io/tags/gif role=button class="no-underline no-underline-on-hover">gif</a></li><li><a href=https://aben20807.github.io/tags/jpeg role=button class="no-underline no-underline-on-hover">jpeg</a></li><li><a href=https://aben20807.github.io/tags/jpg role=button class="no-underline no-underline-on-hover">jpg</a></li><li><a href=https://aben20807.github.io/tags/pillow role=button class="no-underline no-underline-on-hover">pillow</a></li><li><a href=https://aben20807.github.io/tags/python role=button class="no-underline no-underline-on-hover">python</a></li><li><a href=https://aben20807.github.io/tags/video role=button class="no-underline no-underline-on-hover">video</a></li><li><a href=https://aben20807.github.io/tags/webp role=button class="no-underline no-underline-on-hover">webp</a></li><li><a href=https://aben20807.github.io/tags/mp4 role=button class="no-underline no-underline-on-hover">mp4</a></li></span></div></div></div></div><div class=row><div class=col-md-8></div></div></div><p>A collection of frequently used ffmpeg commands.</p><h1 id=video-to-video class="article-heading serif">Video to Video
<a class="headline-hash smoothScroll hover-show scrollspy" href=#video-to-video><i class="fas fa-hashtag fa-xs"></i></a></h1><h2 id=convert-flv-to-mp4-without-re-encode-fast class="article-heading serif">Convert .flv to .mp4 without re-encode (fast)
<a class="headline-hash smoothScroll hover-show scrollspy" href=#convert-flv-to-mp4-without-re-encode-fast><i class="fas fa-hashtag fa-xs"></i></a></h2><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>ffmpeg -i input.flv -c copy -copyts output.mp4
</span></span></code></pre></div><ul><li>ref: <a href=https://superuser.com/a/860127 title="FFMPEG convert flv to mp4 without losing quality [duplicate]" aria-label="FFMPEG convert flv to mp4 without losing quality [duplicate]" target=_blank rel="noreferrer noopener"><i class="fas fa-external-link-square-alt"></i> FFMPEG convert flv to mp4 without losing quality [duplicate]</a></li></ul><h2 id=convert-unplayable-mp4-to-samsung-supported-mp4 class="article-heading serif">Convert unplayable .mp4 to Samsung supported .mp4
<a class="headline-hash smoothScroll hover-show scrollspy" href=#convert-unplayable-mp4-to-samsung-supported-mp4><i class="fas fa-hashtag fa-xs"></i></a></h2><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>ffmpeg -n -nostdin -i input.mp4 -c:v h264_nvenc -preset slow -crf <span style=color:#d3869b>23</span> -c:a aac -b:a 192k -vf format<span style=color:#fe8019>=</span>yuv420p -movflags +faststart output.mp4
</span></span></code></pre></div><ul><li>Document: <a href=https://trac.ffmpeg.org/wiki/Encode/H.264 title="H.264 Video Encoding Guide" aria-label="H.264 Video Encoding Guide" target=_blank rel="noreferrer noopener"><i class="fas fa-external-link-square-alt"></i> H.264 Video Encoding Guide</a></li></ul><details><summary><span>batch version</span></summary><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8ec07c>#!/bin/env bash
</span></span></span><span style=display:flex><span><span style=color:#8ec07c></span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># My Video Converter</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Convert unplayable mp4 to playable mp4</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># File with spaces. Ref: https://unix.stackexchange.com/a/9499</span>
</span></span><span style=display:flex><span>find . -maxdepth <span style=color:#d3869b>1</span> -type f <span style=color:#b8bb26>\(</span> -iname <span style=color:#b8bb26>&#34;*.mp4&#34;</span> ! -iname <span style=color:#b8bb26>&#34;*.new.mp4&#34;</span> <span style=color:#b8bb26>\)</span> -print0 | <span style=color:#fe8019>while</span> IFS<span style=color:#fe8019>=</span> <span style=color:#fabd2f>read</span> -r -d <span style=color:#b8bb26>&#39;&#39;</span> file; <span style=color:#fe8019>do</span>
</span></span><span style=display:flex><span>    ext<span style=color:#fe8019>=</span><span style=color:#b8bb26>&#34;</span><span style=color:#b8bb26>${</span>file##*.<span style=color:#b8bb26>}</span><span style=color:#b8bb26>&#34;</span>
</span></span><span style=display:flex><span>    filename<span style=color:#fe8019>=</span><span style=color:#b8bb26>&#34;</span><span style=color:#b8bb26>${</span>file%.*<span style=color:#b8bb26>}</span><span style=color:#b8bb26>&#34;</span>
</span></span><span style=display:flex><span>    new_file<span style=color:#fe8019>=</span><span style=color:#b8bb26>&#34;</span><span style=color:#b8bb26>${</span>filename<span style=color:#b8bb26>}</span><span style=color:#b8bb26>.new.</span><span style=color:#b8bb26>${</span>ext<span style=color:#b8bb26>}</span><span style=color:#b8bb26>&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#fabd2f>echo</span> $new_file
</span></span><span style=display:flex><span>    ffmpeg -n -nostdin -i <span style=color:#b8bb26>&#34;</span>$file<span style=color:#b8bb26>&#34;</span> -c:v h264_nvenc -preset slow <span style=color:#b8bb26>\
</span></span></span><span style=display:flex><span><span style=color:#b8bb26></span>        -crf <span style=color:#d3869b>23</span> -c:a aac -b:a 192k -vf format<span style=color:#fe8019>=</span>yuv420p <span style=color:#b8bb26>\
</span></span></span><span style=display:flex><span><span style=color:#b8bb26></span>        -movflags +faststart <span style=color:#b8bb26>&#34;</span>$new_file<span style=color:#b8bb26>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#fe8019>done</span>
</span></span></code></pre></div><ul><li><a href=https://gist.github.com/aben20807/56d222dae9f4cb7b1dc3f69388e83982 title=mirror aria-label=mirror target=_blank rel="noreferrer noopener"><i class="fas fa-external-link-square-alt"></i> mirror</a></li></ul></details><h1 id=video-concat class="article-heading serif">Video Concat
<a class="headline-hash smoothScroll hover-show scrollspy" href=#video-concat><i class="fas fa-hashtag fa-xs"></i></a></h1><h2 id=concat-wo-re-encode-fast class="article-heading serif">Concat w/o re-encode (fast)
<a class="headline-hash smoothScroll hover-show scrollspy" href=#concat-wo-re-encode-fast><i class="fas fa-hashtag fa-xs"></i></a></h2><ul><li>Create the <code>list.txt</code> file manually</li></ul><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ cat list.txt
</span></span><span style=display:flex><span>file A.mp4
</span></span><span style=display:flex><span>file B.mp4
</span></span><span style=display:flex><span>file C.mp4
</span></span><span style=display:flex><span>$ ffmpeg -safe <span style=color:#d3869b>0</span> -f concat -i list.txt -c copy output.mp3
</span></span></code></pre></div><ul><li>Create a file list using the <code>find</code> command (not compatible with PowerShell)</li></ul><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ffmpeg -safe <span style=color:#d3869b>0</span> -f concat -i &lt;<span style=color:#fe8019>(</span>find . -type f -name <span style=color:#b8bb26>&#39;*.mp4&#39;</span> -printf <span style=color:#b8bb26>&#34;file &#39;</span>$PWD<span style=color:#b8bb26>/%p&#39;\n&#34;</span> | sort<span style=color:#fe8019>)</span> -c copy output.mp4
</span></span></code></pre></div><h2 id=concat-w-re-encode-slow class="article-heading serif">Concat w/ re-encode (slow)
<a class="headline-hash smoothScroll hover-show scrollspy" href=#concat-w-re-encode-slow><i class="fas fa-hashtag fa-xs"></i></a></h2><ul><li>remove <code>-c:v h264_nvenc</code> if there is no GPU driver</li></ul><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>ffmpeg -i A.mp4 -i B.mp4 -filter_complex <span style=color:#b8bb26>&#34;concat=n=2:v=1:a=1&#34;</span> -c:v h264_nvenc output.mp4
</span></span></code></pre></div><h2 id=if-error-when-different-sar class="article-heading serif">if error when different SAR
<a class="headline-hash smoothScroll hover-show scrollspy" href=#if-error-when-different-sar><i class="fas fa-hashtag fa-xs"></i></a></h2><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>[Parsed_concat_4 @ 0x55c55ae4d400] Input link in0:v0 parameters (size 1280x720, SAR 1:1) do not match the corresponding output link in0:v0 parameters (1280x720, SAR 8001:8000)
</span></span><span style=display:flex><span>[Parsed_concat_4 @ 0x55c55ae4d400] Failed to configure output pad on Parsed_concat_4
</span></span><span style=display:flex><span>Error reinitializing filters!
</span></span></code></pre></div><p>Correct the aspect of one of videos first by: <code>ffmpeg -i wrong_A.mp4 -aspect 16:9 -c copy A.mp4</code></p><h1 id=reduce-video-file-size class="article-heading serif">Reduce video file size
<a class="headline-hash smoothScroll hover-show scrollspy" href=#reduce-video-file-size><i class="fas fa-hashtag fa-xs"></i></a></h1><ul><li><code>-crf N</code>: N: 0-51, where 0 is lossless, 23 is the default, and 51 is worst quality possible</li><li><code>-b 800k</code>: limit the bitrate (optional)</li></ul><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>ffmpeg -i input.flv -c:v h264_nvenc -crf <span style=color:#d3869b>30</span> -c:a aac -b:a 192k -vf format<span style=color:#fe8019>=</span>yuv420p -movflags +faststart output.mp4
</span></span></code></pre></div><h1 id=combine-video-and-audio class="article-heading serif">Combine video and audio
<a class="headline-hash smoothScroll hover-show scrollspy" href=#combine-video-and-audio><i class="fas fa-hashtag fa-xs"></i></a></h1><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>ffmpeg -i video.mp4 -i audio.m4a -c copy -map 0:v:0 -map 1:a:0 output.mp4
</span></span></code></pre></div><h1 id=video-to-gif class="article-heading serif">Video to .gif
<a class="headline-hash smoothScroll hover-show scrollspy" href=#video-to-gif><i class="fas fa-hashtag fa-xs"></i></a></h1><ul><li><code>scale</code> and <code>max_colors</code> impact the output gif&rsquo;s size</li></ul><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>ffmpeg -y -i input.flv -filter_complex <span style=color:#b8bb26>&#34;fps=4,scale=1920:-1:flags=lanczos,split[s0][s1];[s0]palettegen=max_colors=256[p];[s1][p]paletteuse=dither=bayer&#34;</span> output.gif
</span></span></code></pre></div><ul><li>ref: <a href=https://superuser.com/questions/1049606/reduce-generated-gif-size-using-ffmpeg/1695537#1695537 title="Reduce Generated GIF Size Using FFMPEG" aria-label="Reduce Generated GIF Size Using FFMPEG" target=_blank rel="noreferrer noopener"><i class="fas fa-external-link-square-alt"></i> Reduce Generated GIF Size Using FFMPEG</a></li></ul><h1 id=convert-jpeg-to-webp class="article-heading serif">Convert .jpeg to .webp
<a class="headline-hash smoothScroll hover-show scrollspy" href=#convert-jpeg-to-webp><i class="fas fa-hashtag fa-xs"></i></a></h1><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>ffmpeg -i input.jpg -c:v libwebp output.webp
</span></span></code></pre></div><h1 id=convert-webp-to-jpeg class="article-heading serif">Convert .webp to .jpeg
<a class="headline-hash smoothScroll hover-show scrollspy" href=#convert-webp-to-jpeg><i class="fas fa-hashtag fa-xs"></i></a></h1><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>ffmpeg -i input.webp output.jpg
</span></span></code></pre></div><h2 id=batch-version-with-find class="article-heading serif">Batch version with find
<a class="headline-hash smoothScroll hover-show scrollspy" href=#batch-version-with-find><i class="fas fa-hashtag fa-xs"></i></a></h2><ul><li>keep original input file</li></ul><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>find . -iname <span style=color:#b8bb26>&#39;*.webp&#39;</span> -exec bash -c <span style=color:#b8bb26>&#39;ffmpeg -y -hide_banner -loglevel error -i &#34;$1&#34; -q:v 1 -qmin 1 -qmax 1 &#34;${1%.*}.jpg&#34;; printf &#34;$1\n&#34;&#39;</span> _ <span style=color:#fe8019>{}</span> <span style=color:#b8bb26>\;</span>
</span></span></code></pre></div><ul><li>remove original input file</li></ul><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>find . -iname <span style=color:#b8bb26>&#39;*.webp&#39;</span> -exec bash -c <span style=color:#b8bb26>&#39;ffmpeg -y -hide_banner -loglevel error -i &#34;$1&#34; -q:v 1 -qmin 1 -qmax 1 &#34;${1%.*}.jpg&#34;; printf &#34;$1\n&#34; &amp;&amp; rm &#34;$1&#34;&#39;</span> _ <span style=color:#fe8019>{}</span> <span style=color:#b8bb26>\;</span>
</span></span></code></pre></div><ul><li>ref: <a href=https://stackoverflow.com/questions/49591274/cli-command-to-convert-webp-images-to-jpg#comment127024422_49592591 title="CLI command to convert Webp image(s) to JPG? [closed]" aria-label="CLI command to convert Webp image(s) to JPG? [closed]" target=_blank rel="noreferrer noopener"><i class="fas fa-external-link-square-alt"></i> CLI command to convert Webp image(s) to JPG? [closed]</a></li></ul><h2 id=pil-offers-a-significantly-faster-performance-when-processing-images-in-batches class="article-heading serif">PIL offers a significantly faster performance when processing images in batches
<a class="headline-hash smoothScroll hover-show scrollspy" href=#pil-offers-a-significantly-faster-performance-when-processing-images-in-batches><i class="fas fa-hashtag fa-xs"></i></a></h2><ul><li>tested in Windows PowerShell with python 3.12.5</li></ul><details><summary><span>python script</span></summary><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#928374;font-style:italic># -*- coding: utf8 -*-</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># pip install Pillow tqdm</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># python -X utf8 .\webp2jpg.py --dir ../</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#fe8019>from</span> pathlib <span style=color:#fe8019>import</span> Path
</span></span><span style=display:flex><span><span style=color:#fe8019>from</span> multiprocessing <span style=color:#fe8019>import</span> Pool, cpu_count
</span></span><span style=display:flex><span><span style=color:#fe8019>import</span> argparse
</span></span><span style=display:flex><span><span style=color:#fe8019>import</span> os<span style=color:#fe8019>,</span> sys
</span></span><span style=display:flex><span><span style=color:#fe8019>from</span> tqdm <span style=color:#fe8019>import</span> tqdm
</span></span><span style=display:flex><span><span style=color:#fe8019>from</span> PIL <span style=color:#fe8019>import</span> Image
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#fe8019>def</span> <span style=color:#fabd2f>process</span>(file):
</span></span><span style=display:flex><span>    ori_dir <span style=color:#fe8019>=</span> <span style=color:#fabd2f>str</span>(<span style=color:#fabd2f>str</span>(file<span style=color:#fe8019>.</span>parent<span style=color:#fe8019>.</span>resolve())<span style=color:#fe8019>.</span>encode(<span style=color:#b8bb26>&#34;utf8&#34;</span>), encoding<span style=color:#fe8019>=</span><span style=color:#b8bb26>&#34;utf8&#34;</span>)
</span></span><span style=display:flex><span>    new_dir <span style=color:#fe8019>=</span> ori_dir <span style=color:#fe8019>+</span> <span style=color:#b8bb26>&#34;_jpg&#34;</span>
</span></span><span style=display:flex><span>    os<span style=color:#fe8019>.</span>makedirs(new_dir, exist_ok<span style=color:#fe8019>=</span><span style=color:#fe8019>True</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ori_file <span style=color:#fe8019>=</span> <span style=color:#fabd2f>str</span>(file<span style=color:#fe8019>.</span>resolve())
</span></span><span style=display:flex><span>    new_file <span style=color:#fe8019>=</span> ori_file<span style=color:#fe8019>.</span>replace(file<span style=color:#fe8019>.</span>suffix, <span style=color:#b8bb26>&#34;.jpg&#34;</span>)<span style=color:#fe8019>.</span>replace(ori_dir, new_dir)
</span></span><span style=display:flex><span>    ori_file <span style=color:#fe8019>=</span> <span style=color:#fabd2f>str</span>(<span style=color:#fabd2f>bytes</span>(ori_file, encoding<span style=color:#fe8019>=</span><span style=color:#b8bb26>&#34;utf8&#34;</span>), encoding<span style=color:#fe8019>=</span><span style=color:#b8bb26>&#34;utf8&#34;</span>)
</span></span><span style=display:flex><span>    new_file <span style=color:#fe8019>=</span> <span style=color:#fabd2f>str</span>(<span style=color:#fabd2f>bytes</span>(new_file, encoding<span style=color:#fe8019>=</span><span style=color:#b8bb26>&#34;utf8&#34;</span>), encoding<span style=color:#fe8019>=</span><span style=color:#b8bb26>&#34;utf8&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#fe8019>if</span> <span style=color:#fe8019>not</span> os<span style=color:#fe8019>.</span>path<span style=color:#fe8019>.</span>isfile(new_file):
</span></span><span style=display:flex><span>        im <span style=color:#fe8019>=</span> Image<span style=color:#fe8019>.</span>open(ori_file)<span style=color:#fe8019>.</span>convert(<span style=color:#b8bb26>&#34;RGB&#34;</span>)
</span></span><span style=display:flex><span>        im<span style=color:#fe8019>.</span>save(new_file, <span style=color:#b8bb26>&#34;jpeg&#34;</span>, subsampling<span style=color:#fe8019>=</span><span style=color:#d3869b>0</span>, quality<span style=color:#fe8019>=</span><span style=color:#d3869b>95</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#fe8019>def</span> <span style=color:#fabd2f>main</span>():
</span></span><span style=display:flex><span>    parser <span style=color:#fe8019>=</span> argparse<span style=color:#fe8019>.</span>ArgumentParser()
</span></span><span style=display:flex><span>    parser<span style=color:#fe8019>.</span>add_argument(<span style=color:#b8bb26>&#34;--dir&#34;</span>, <span style=color:#fabd2f>type</span><span style=color:#fe8019>=</span><span style=color:#fabd2f>str</span>, required<span style=color:#fe8019>=</span><span style=color:#fe8019>True</span>)
</span></span><span style=display:flex><span>    parser<span style=color:#fe8019>.</span>add_argument(<span style=color:#b8bb26>&#34;--count&#34;</span>, action<span style=color:#fe8019>=</span><span style=color:#b8bb26>&#34;store_true&#34;</span>)
</span></span><span style=display:flex><span>    args <span style=color:#fe8019>=</span> parser<span style=color:#fe8019>.</span>parse_args()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    pwd <span style=color:#fe8019>=</span> Path(<span style=color:#b8bb26>rf</span><span style=color:#b8bb26>&#34;</span><span style=color:#b8bb26>{</span>args<span style=color:#fe8019>.</span>dir<span style=color:#b8bb26>}</span><span style=color:#b8bb26>&#34;</span>)
</span></span><span style=display:flex><span>    files <span style=color:#fe8019>=</span> [Path(file) <span style=color:#fe8019>for</span> file <span style=color:#fe8019>in</span> pwd<span style=color:#fe8019>.</span>glob(<span style=color:#b8bb26>&#34;**/*.webp&#34;</span>)]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#fe8019>if</span> args<span style=color:#fe8019>.</span>count:
</span></span><span style=display:flex><span>        <span style=color:#fabd2f>print</span>(<span style=color:#b8bb26>f</span><span style=color:#b8bb26>&#34;total: </span><span style=color:#b8bb26>{</span><span style=color:#fabd2f>len</span>(files)<span style=color:#b8bb26>}</span><span style=color:#b8bb26>&#34;</span>)
</span></span><span style=display:flex><span>        sys<span style=color:#fe8019>.</span>exit(<span style=color:#d3869b>0</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#fe8019>with</span> Pool(cpu_count()) <span style=color:#fe8019>as</span> p:
</span></span><span style=display:flex><span>        <span style=color:#fe8019>with</span> tqdm(total<span style=color:#fe8019>=</span><span style=color:#fabd2f>len</span>(files), ascii<span style=color:#fe8019>=</span><span style=color:#fe8019>True</span>, ncols<span style=color:#fe8019>=</span><span style=color:#d3869b>60</span>) <span style=color:#fe8019>as</span> pbar:
</span></span><span style=display:flex><span>            <span style=color:#fe8019>for</span> _ <span style=color:#fe8019>in</span> p<span style=color:#fe8019>.</span>imap_unordered(process, files):
</span></span><span style=display:flex><span>                pbar<span style=color:#fe8019>.</span>update()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#fabd2f>print</span>(<span style=color:#b8bb26>f</span><span style=color:#b8bb26>&#34;total: </span><span style=color:#b8bb26>{</span><span style=color:#fabd2f>len</span>(files)<span style=color:#b8bb26>}</span><span style=color:#b8bb26>&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#fe8019>if</span> __name__ <span style=color:#fe8019>==</span> <span style=color:#b8bb26>&#34;__main__&#34;</span>:
</span></span><span style=display:flex><span>    main()
</span></span></code></pre></div></details><div data-pagefind-ignore=all class=footer><div class="column center tc"><div id=license-block><dl style=font-size:80%><dt class=license>Author:</dt><dd class=license>Huang, Po-Hsuan 黃柏瑄 (aben20807)</dd><dt class=license>Last modified:</dt><dd class=license>Apr 13, 2025</dd><dt class=license>License:</dt><dd class=license><a href=https://creativecommons.org/licenses/by/4.0/ target=_blank rel="noreferrer noopener">CC BY 4.0</a></dd><dt class=license>Link:</dt><dd class=license><span style=margin-right:.5rem>https://aben20807.github.io/posts/20250413-useful-ffmpeg-commands/</span></dd></dl></div><div class=mb3><span class=tags-sm><a onclick=copyToClip() role=button class="no-underline no-underline-on-hover" title="Copy the license block" style=cursor:pointer!important;white-space:nowrap><i class="far fa-clipboard"></i> Copy license</a></span></div><script>function copyToClip(){let o=document.getElementById("license-block"),t=document.querySelectorAll("dt.license"),n=document.querySelectorAll("dd.license"),e=document.createElement("textarea");for(let s=0;s<t.length;s++)e.value+=t[s].textContent+" "+n[s].textContent,s<t.length-1&&(e.value+="; ");document.body.appendChild(e),e.select(),document.execCommand("Copy"),e.remove();const s=new XNotify("BottomLeft");s.info({borderRadius:"2px",content:"copied!",duration:3e3,background:"#646464"})}</script><div id=like-button-container class=like-button-wrapper><button id=like-btn class=like-btn onclick=toggleLike() title="Like this post">
<i id=like-icon class="far fa-heart"></i>
<span id=like-count>0</span></button></div><style>.like-button-wrapper{display:flex;justify-content:center;margin:1.5rem 0}.like-btn{display:flex;align-items:center;gap:.5rem;padding:.6rem 1.2rem;font-size:1rem;border:2px solid #e74c3c;border-radius:2rem;background:0 0;color:#e74c3c;cursor:pointer;transition:all .3s ease;font-family:inherit}.like-btn:hover{background:rgba(231,76,60,.1);transform:scale(1.05)}.like-btn.liked{background:#e74c3c;color:#fff}.like-btn.liked i{animation:heartBeat .3s ease-in-out}.like-btn:disabled{opacity:.6;cursor:not-allowed}@keyframes heartBeat{0%{transform:scale(1)}50%{transform:scale(1.3)}100%{transform:scale(1)}}.dark .like-btn{border-color:#ff6b6b;color:#ff6b6b}.dark .like-btn:hover{background:rgba(255,107,107,.1)}.dark .like-btn.liked{background:#ff6b6b;color:#fff}</style><script>(function(){const n="https://script.google.com/macros/s/AKfycbynClzGELAd1kaw6K4TqE7tKKduvz3aeupzRrjFQfFpGk9_ROiQ1H8zJXj2w4IybYwM/exec",e="https://aben20807.github.io/posts/20250413-useful-ffmpeg-commands/",t="liked_posts";function s(){try{const n=JSON.parse(localStorage.getItem(t)||"[]");return n.includes(e)}catch{return!1}}function i(){try{const n=JSON.parse(localStorage.getItem(t)||"[]");n.includes(e)||(n.push(e),localStorage.setItem(t,JSON.stringify(n)))}catch(e){console.error("Failed to save liked state:",e)}}async function o(){try{const t=await fetch(`${n}?url=${encodeURIComponent(e)}`),s=await t.json();document.getElementById("like-count").textContent=s.likes||0}catch(e){console.error("Failed to fetch like count:",e)}}function a(){const t=document.getElementById("like-btn"),e=document.getElementById("like-icon");s()&&(t.classList.add("liked"),e.classList.remove("far"),e.classList.add("fas"))}window.toggleLike=async function(){const t=document.getElementById("like-btn"),a=document.getElementById("like-icon"),r=document.getElementById("like-count");if(t.disabled)return;if(s()&&typeof XNotify!="undefined"){const e=new XNotify("BottomLeft");e.info({borderRadius:"2px",content:"You've already liked this post!",duration:3e3,background:"#646464"})}t.disabled=!0;try{const c=await fetch(`${n}?url=${encodeURIComponent(e)}`,{method:"POST",mode:"no-cors"}),s=parseInt(r.textContent)||0;if(r.textContent=s+1,t.classList.add("liked"),a.classList.remove("far"),a.classList.add("fas"),i(),typeof XNotify!="undefined"){const e=new XNotify("BottomLeft");e.info({borderRadius:"2px",content:"Thanks for liking! ❤️",duration:3e3,background:"#e74c3c"})}setTimeout(o,1e3)}catch(e){if(console.error("Failed to like post:",e),typeof XNotify!="undefined"){const e=new XNotify("BottomLeft");e.info({borderRadius:"2px",content:"Failed to like. Please try again.",duration:3e3,background:"#e74c3c"})}}finally{t.disabled=!1}},document.addEventListener("DOMContentLoaded",function(){o(),a()})})()</script><div class="col tl" style=font-size:95%!important><div class="fl w-100"><a title="Prev: Tmux" class="link-reverse fl w-100 truncate" href=https://aben20807.github.io/posts/20190814-tmux/><i class="fas fa-caret-square-up"></i> Tmux<p class="footer-summary ml3 mb1">介紹最基本的 Tmux 使用方式以及相關設定。
看網址就知道又是古老的文章債了，到最近還有在使用，所以就整理一下發出來。</p></a></div><div class="fl w-100"><a title="Next: Some Python Enum Tricks" class="link-reverse fl w-100 truncate" href=https://aben20807.github.io/posts/20250417-dynamic-overwrite-python-enum/><i class="fas fa-caret-square-down"></i> Some Python Enum Tricks<p class="footer-summary ml3 mb1">Some useful Python enum tricks.</p></a></div><div class=mb2><div class="fl w-100"><a title="Related: Python Semantic Refactor: Sampling" class="link-reverse fl w-100 truncate" href=https://aben20807.github.io/posts/20250318-python-semantic-refactor-sample/><i class="fas fa-seedling"></i> Python Semantic Refactor: Sampling<p class="footer-summary ml3 mb1">在看 code 時又看到一段神奇的程式碼。有骰子大法的味道。</p></a></div><div class="fl w-100"><a title="Related: Mysterious Conda" class="link-reverse fl w-100 truncate" href=https://aben20807.github.io/posts/20241015-mysterious-conda/><i class="fas fa-seedling"></i> Mysterious Conda<p class="footer-summary ml3 mb1">Note some frustrations with using Conda.</p></a></div><div class="fl w-100"><a title="Related: Copy Latex Bibliography without Line Break for each Item" class="link-reverse fl w-100 truncate" href=https://aben20807.github.io/posts/20230805-copy-latex-bibliography-without-line-break-for-each-item/><i class="fas fa-seedling"></i> Copy Latex Bibliography without Line Break for each Item<p class="footer-summary ml3 mb1">產生無換行的參考文獻，不用手動刪除換行。
用於上傳論文比對系統</p></a></div></div></div></div><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//forrecording.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></article></div><div id=toc class="column col-2 hide-print"><div class="toc toc-nav toc-pills ml-0 col-3"><li class="nav-item pb-3 text-center"><span class="font-weight-bold mb-2 serif">- CATALOG -</span></li><div id=toc-scroll class="noselect hide-scrollbar"><ul class=toc><li class=toc-item><a class="toc-link smoothScroll" href=#video-to-video>1.
Video to Video</a></li></ul><ul class=toc><ul class=toc><li class=toc-item><a class="toc-link smoothScroll" href=#convert-flv-to-mp4-without-re-encode-fast>1.1.
Convert .flv to .mp4 without re-encode (fast)</a></li></ul></ul><ul class=toc><ul class=toc><li class=toc-item><a class="toc-link smoothScroll" href=#convert-unplayable-mp4-to-samsung-supported-mp4>1.2.
Convert unplayable .mp4 to Samsung supported .mp4</a></li></ul></ul><ul class=toc><li class=toc-item><a class="toc-link smoothScroll" href=#video-concat>2.
Video Concat</a></li></ul><ul class=toc><ul class=toc><li class=toc-item><a class="toc-link smoothScroll" href=#concat-wo-re-encode-fast>2.1.
Concat w/o re-encode (fast)</a></li></ul></ul><ul class=toc><ul class=toc><li class=toc-item><a class="toc-link smoothScroll" href=#concat-w-re-encode-slow>2.2.
Concat w/ re-encode (slow)</a></li></ul></ul><ul class=toc><ul class=toc><li class=toc-item><a class="toc-link smoothScroll" href=#if-error-when-different-sar>2.3.
if error when different SAR</a></li></ul></ul><ul class=toc><li class=toc-item><a class="toc-link smoothScroll" href=#reduce-video-file-size>3.
Reduce video file size</a></li></ul><ul class=toc><li class=toc-item><a class="toc-link smoothScroll" href=#combine-video-and-audio>4.
Combine video and audio</a></li></ul><ul class=toc><li class=toc-item><a class="toc-link smoothScroll" href=#video-to-gif>5.
Video to .gif</a></li></ul><ul class=toc><li class=toc-item><a class="toc-link smoothScroll" href=#convert-jpeg-to-webp>6.
Convert .jpeg to .webp</a></li></ul><ul class=toc><li class=toc-item><a class="toc-link smoothScroll" href=#convert-webp-to-jpeg>7.
Convert .webp to .jpeg</a></li></ul><ul class=toc><ul class=toc><li class=toc-item><a class="toc-link smoothScroll" href=#batch-version-with-find>7.1.
Batch version with find</a></li></ul></ul><ul class=toc><ul class=toc><li class=toc-item><a class="toc-link smoothScroll" href=#pil-offers-a-significantly-faster-performance-when-processing-images-in-batches>7.2.
PIL offers a significantly faster performance when processing images in batches</a></li></ul></ul></div><ul class=toc><li class=toc-item><a class='goto pl1 toc-item' id=gotop>⊛ Back to top</a></li><li class=toc-item><a class='goto pl1 toc-item' id=gobottom>⊛ Go to bottom</a></li><script type=text/javascript>fetchInject(["https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js"]).then(()=>{var e="https://cdnjs.cloudflare.com/ajax/libs/jquery-smooth-scroll/2.2.0/jquery.smooth-scroll.min.js";$.getScript(e,function(){$("#gotop").click(function(){$("html,body").animate({scrollTop:0},300,"swing",function(){$("a.toc-link").removeClass("active")})}),$("#gobottom").click(function(){$("html,body").animate({scrollTop:$(document).height()},300,"swing",function(){$("a.toc-link").removeClass("active")})})})})</script></ul></div></div></div></main><div id=gotop_btn class=center><i class="fas fa-chevron-up"></i></div><footer class="hide-print sans-serif f6 fw1 bg-black near-white bottom-0 w-100 pa3 db overflow-auto" role=contentinfo><p class="w-50 fr tr" style=font-size:.875rem!important>Made with Hugo and
<a class="no-underline no-underline-on-hover" href=https://github.com/aben20807/hugOuO target=_blank rel="noreferrer noopener">hugOuO</a></p><p class="w-50 near-white" style=margin:0;font-size:.875rem!important>&copy; 2019-2026 Huang, Po-Hsuan 黃柏瑄 (aben20807)</p><p class="w-50 near-white" style=margin:0;font-size:.875rem!important><span class=pr2-ns><a href=https://aben20807.github.io/disclaimer>免責聲明 (Disclaimer)</a></span><span><a href=https://aben20807.github.io/privacy-policy>隱私權政策 (Privacy Policy)</span></a></p></footer><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js></script><script type=text/javascript src=https://aben20807.github.io/js/hugouo.js?1768737499 async></script><script type=text/javascript src=https://aben20807.github.io/js/x-notify.min.js async></script><script>fetchInject(["https://cdn.jsdelivr.net/npm/baffle@0.3.6/dist/baffle.min.js"]).then(()=>{baffle(document.querySelector("h1")).start().set({speed:70}).reveal(800,800)})</script><script>MathJax={startup:{requireMap:{AMSmath:"ams",AMSsymbols:"ams",AMScd:"amscd",HTML:"html",noErrors:"noerrors",noUndefined:"noundefined"}},tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"]],tags:"ams"},skipTags:["script","noscript","style","textarea","pre"],svg:{fontCache:"global",scale:1},chtml:{scale:1}}</script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@4.0.0-beta.4/tex-mml-chtml.js></script><script type=text/javascript src=https://aben20807.github.io/js/zooming.min.js></script><script>document.addEventListener("DOMContentLoaded",function(){let e=document.querySelector("body"),t=document.querySelectorAll(".ov-for-img");new Zooming({bgColor:"rgb(0, 0, 0)",bgOpacity:"0.8",customSize:"200%",enableGrab:!1,onBeforeOpen:()=>{t.forEach(e=>e.classList.remove("overflow-x-scroll")),e.style.overflowX="visible"},onClose:()=>{t.forEach(e=>e.classList.add("overflow-x-scroll")),e.style.overflowX="hidden"}}).listen(".img-zoomable")})</script><script>document.fonts.load("12px Noto Sans TC").then(function(){const e=document.querySelector("body");e.style.fontFamily=`"Noto Sans TC", ${window.getComputedStyle(e).getPropertyValue("font-family")}`}),document.fonts.load("12px Noto Sans TC").then(function(){let e=document.querySelectorAll(".serif");e.forEach(e=>{e.style.fontFamily=`Alice, "Noto Sans TC", ${window.getComputedStyle(e).getPropertyValue("font-family")}`})})</script></body></html>